File inputbak/.github/dependabot.yml is a regular file while file input/.github/dependabot.yml is a regular empty file
File inputbak/.github/matchers/gradle-build-kotlin-error-matcher.json is a regular file while file input/.github/matchers/gradle-build-kotlin-error-matcher.json is a regular empty file
File inputbak/.github/matchers/gradle-build-kotlin-error-matcher.json.license is a regular file while file input/.github/matchers/gradle-build-kotlin-error-matcher.json.license is a regular empty file
File inputbak/.github/matchers/gradle-build-matcher.json is a regular file while file input/.github/matchers/gradle-build-matcher.json is a regular empty file
File inputbak/.github/matchers/gradle-build-matcher.json.license is a regular file while file input/.github/matchers/gradle-build-matcher.json.license is a regular empty file
File inputbak/.github/workflows/build.yml is a regular file while file input/.github/workflows/build.yml is a regular empty file
File inputbak/.github/workflows/dependency-submission.yml is a regular file while file input/.github/workflows/dependency-submission.yml is a regular empty file
File inputbak/.gitignore is a regular file while file input/.gitignore is a regular empty file
diff -Naur inputbak/README.md input/README.md
--- inputbak/README.md	2025-04-12 11:01:48.196387576 +0300
+++ input/README.md	2025-04-12 11:02:49.276393661 +0300
@@ -13,6 +13,22 @@
 
 If you'd like to help translate microG, take a look at [TRANSLATION](TRANSLATION.md).
 
+About this fork
+-------
+This repository is a fork of [microG GmsCore](https://github.com/microg/GmsCore) to allow patched Google apps to run without root and under a different package name using GmsCore instead of Google Play Services, via the "GmsCore support" patch by ReVanced from [ReVanced Patches](https://github.com/revanced/revanced-patches) with the minimum amount of changes necessary to upstream.
+
+Goals of this fork:
+- Run next to an existing GMS installation such as [microG GmsCore](https://github.com/microg/GmsCore) or Google Play Services.
+- Usage with the "GmsCore support" patch by ReVanced from [ReVanced Patches](https://github.com/revanced/revanced-patches)
+- Feature parity with upstream
+
+Nongoals of this fork:
+- New features that do not contribute to the goal of this fork
+- Bug fixes that do not contribute to the goal of this fork
+
+Contributing to the fork
+-------
+You can create an issue or pull request to contribute to the fork. In both cases, ensure it aligns with this fork's goals.
 
 License
 -------
diff -Naur inputbak/build.gradle input/build.gradle
--- inputbak/build.gradle	2025-04-12 11:01:48.206387577 +0300
+++ input/build.gradle	2025-04-12 11:02:49.173060318 +0300
@@ -4,6 +4,9 @@
  */
 
 buildscript {
+    ext.applicationNamespace = "com.google.android.gms"
+    ext.basePackageName = "app.revanced"
+
     ext.cronetVersion = '102.5005.125'
     ext.wearableVersion = '0.1.1'
 
diff -Naur inputbak/firebase-auth/core/build.gradle input/firebase-auth/core/build.gradle
--- inputbak/firebase-auth/core/build.gradle	2025-04-12 11:01:48.206387577 +0300
+++ input/firebase-auth/core/build.gradle	2025-04-12 11:02:49.176393651 +0300
@@ -33,6 +33,10 @@
         versionName version
         minSdkVersion androidMinSdk
         targetSdkVersion androidTargetSdk
+
+        manifestPlaceholders = [
+                basePackageName: "$basePackageName"
+        ]
     }
 
     sourceSets {
diff -Naur inputbak/firebase-auth/core/src/main/AndroidManifest.xml input/firebase-auth/core/src/main/AndroidManifest.xml
--- inputbak/firebase-auth/core/src/main/AndroidManifest.xml	2025-04-12 11:01:48.206387577 +0300
+++ input/firebase-auth/core/src/main/AndroidManifest.xml	2025-04-12 11:02:49.176393651 +0300
@@ -12,7 +12,7 @@
     <application>
         <service android:name="org.microg.gms.firebase.auth.FirebaseAuthService">
             <intent-filter>
-                <action android:name="com.google.firebase.auth.api.gms.service.START" />
+                <action android:name="${basePackageName}.firebase.auth.api.gms.service.START" />
             </intent-filter>
         </service>
         <activity
diff -Naur inputbak/gradle.properties input/gradle.properties
--- inputbak/gradle.properties	2025-04-12 11:01:48.213054245 +0300
+++ input/gradle.properties	2025-04-12 11:02:49.176393651 +0300
@@ -2,3 +2,4 @@
 org.gradle.configuration-cache=true
 org.gradle.caching=true
 org.gradle.jvmargs=-Xmx4096m -XX:+UseParallelGC --add-exports=jdk.compiler/com.sun.tools.javac.main=ALL-UNNAMED
+android.enableJetifier=true
diff -Naur inputbak/play-services-ads/core/build.gradle input/play-services-ads/core/build.gradle
--- inputbak/play-services-ads/core/build.gradle	2025-04-12 11:01:48.223054246 +0300
+++ input/play-services-ads/core/build.gradle	2025-04-12 11:02:49.176393651 +0300
@@ -23,6 +23,10 @@
         versionName version
         minSdkVersion androidMinSdk
         targetSdkVersion androidTargetSdk
+
+        manifestPlaceholders = [
+                basePackageName: "$basePackageName"
+        ]
     }
 
     sourceSets {
diff -Naur inputbak/play-services-ads/core/src/main/AndroidManifest.xml input/play-services-ads/core/src/main/AndroidManifest.xml
--- inputbak/play-services-ads/core/src/main/AndroidManifest.xml	2025-04-12 11:01:48.223054246 +0300
+++ input/play-services-ads/core/src/main/AndroidManifest.xml	2025-04-12 11:02:49.179726985 +0300
@@ -7,7 +7,7 @@
     <application>
         <service android:name="org.microg.gms.ads.AdRequestService">
             <intent-filter>
-                <action android:name="com.google.android.gms.ads.service.START" />
+                <action android:name="${basePackageName}.android.gms.ads.service.START" />
                 <category android:name="android.intent.category.DEFAULT" />
             </intent-filter>
         </service>
diff -Naur inputbak/play-services-ads-identifier/core/build.gradle input/play-services-ads-identifier/core/build.gradle
--- inputbak/play-services-ads-identifier/core/build.gradle	2025-04-12 11:01:48.213054245 +0300
+++ input/play-services-ads-identifier/core/build.gradle	2025-04-12 11:02:49.179726985 +0300
@@ -21,6 +21,10 @@
         versionName version
         minSdkVersion androidMinSdk
         targetSdkVersion androidTargetSdk
+
+        manifestPlaceholders = [
+                basePackageName: "$basePackageName"
+        ]
     }
 
     sourceSets {
diff -Naur inputbak/play-services-ads-identifier/core/src/main/AndroidManifest.xml input/play-services-ads-identifier/core/src/main/AndroidManifest.xml
--- inputbak/play-services-ads-identifier/core/src/main/AndroidManifest.xml	2025-04-12 11:01:48.213054245 +0300
+++ input/play-services-ads-identifier/core/src/main/AndroidManifest.xml	2025-04-12 11:02:49.179726985 +0300
@@ -8,7 +8,7 @@
     <application>
         <service android:name=".AdvertisingIdService">
             <intent-filter>
-                <action android:name="com.google.android.gms.ads.identifier.service.START" />
+                <action android:name="${basePackageName}.android.gms.ads.identifier.service.START" />
                 <category android:name="android.intent.category.DEFAULT" />
             </intent-filter>
         </service>
diff -Naur inputbak/play-services-ads-identifier/core/src/main/kotlin/org/microg/gms/ads/identifier/AdvertisingIdService.kt input/play-services-ads-identifier/core/src/main/kotlin/org/microg/gms/ads/identifier/AdvertisingIdService.kt
--- inputbak/play-services-ads-identifier/core/src/main/kotlin/org/microg/gms/ads/identifier/AdvertisingIdService.kt	2025-04-12 11:01:48.213054245 +0300
+++ input/play-services-ads-identifier/core/src/main/kotlin/org/microg/gms/ads/identifier/AdvertisingIdService.kt	2025-04-12 11:02:49.179726985 +0300
@@ -14,6 +14,7 @@
 import android.util.Log
 import androidx.core.os.bundleOf
 import com.google.android.gms.ads.identifier.internal.IAdvertisingIdService
+import com.google.android.gms.common.BuildConfig
 import org.microg.gms.common.GooglePackagePermission
 import org.microg.gms.common.PackageUtils
 import java.util.UUID
@@ -64,7 +65,7 @@
             for (packageName in packageNames) {
                 val applicationInfo = context.packageManager.getApplicationInfo(packageName, 0)
                 if (applicationInfo.targetSdkVersion > 33) {
-                    if (context.packageManager.checkPermission("com.google.android.gms.permission.AD_ID", packageName) == PackageManager.PERMISSION_DENIED) {
+                    if (context.packageManager.checkPermission(BuildConfig.BASE_PACKAGE_NAME + ".android.gms.permission.AD_ID", packageName) == PackageManager.PERMISSION_DENIED) {
                         throw SecurityException("Permission not granted")
                     }
                 }
diff -Naur inputbak/play-services-ads-lite/build.gradle input/play-services-ads-lite/build.gradle
--- inputbak/play-services-ads-lite/build.gradle	2025-04-12 11:01:48.216387578 +0300
+++ input/play-services-ads-lite/build.gradle	2025-04-12 11:02:49.183060319 +0300
@@ -21,6 +21,10 @@
         versionName version
         minSdkVersion androidMinSdk
         targetSdkVersion androidTargetSdk
+
+        manifestPlaceholders = [
+                basePackageName: "$basePackageName"
+        ]
     }
 
     compileOptions {
diff -Naur inputbak/play-services-ads-lite/src/main/AndroidManifest.xml input/play-services-ads-lite/src/main/AndroidManifest.xml
--- inputbak/play-services-ads-lite/src/main/AndroidManifest.xml	2025-04-12 11:01:48.219720912 +0300
+++ input/play-services-ads-lite/src/main/AndroidManifest.xml	2025-04-12 11:02:49.183060319 +0300
@@ -6,7 +6,7 @@
 <manifest xmlns:android="http://schemas.android.com/apk/res/android">
     <uses-permission android:name="android.permission.INTERNET" />
     <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
-    <uses-permission android:name="com.google.android.gms.permission.AD_ID" />
+    <uses-permission android:name="${basePackageName}.android.gms.permission.AD_ID" />
 
     <queries>
         <!-- Website links -->
diff -Naur inputbak/play-services-appinvite/core/build.gradle input/play-services-appinvite/core/build.gradle
--- inputbak/play-services-appinvite/core/build.gradle	2025-04-12 11:01:48.239720914 +0300
+++ input/play-services-appinvite/core/build.gradle	2025-04-12 11:02:49.183060319 +0300
@@ -27,6 +27,10 @@
         versionName version
         minSdkVersion androidMinSdk
         targetSdkVersion androidTargetSdk
+
+        manifestPlaceholders = [
+                basePackageName: "$basePackageName"
+        ]
     }
 
     sourceSets {
diff -Naur inputbak/play-services-appinvite/core/src/main/AndroidManifest.xml input/play-services-appinvite/core/src/main/AndroidManifest.xml
--- inputbak/play-services-appinvite/core/src/main/AndroidManifest.xml	2025-04-12 11:01:48.239720914 +0300
+++ input/play-services-appinvite/core/src/main/AndroidManifest.xml	2025-04-12 11:02:49.186393652 +0300
@@ -11,7 +11,7 @@
             android:name="org.microg.gms.appinivite.AppInviteService"
             android:exported="true">
             <intent-filter>
-                <action android:name="com.google.android.gms.appinvite.service.START" />
+                <action android:name="${basePackageName}.android.gms.appinvite.service.START" />
                 <category android:name="android.intent.category.DEFAULT" />
             </intent-filter>
         </service>
@@ -37,7 +37,7 @@
                 <data android:pathPrefix="/" />
             </intent-filter>
             <intent-filter>
-                <action android:name="com.google.firebase.dynamiclinks.VIEW_DYNAMIC_LINK" />
+                <action android:name="${basePackageName}.firebase.dynamiclinks.VIEW_DYNAMIC_LINK" />
 
                 <category android:name="android.intent.category.BROWSABLE" />
                 <category android:name="android.intent.category.DEFAULT" />
diff -Naur inputbak/play-services-appset/core/build.gradle input/play-services-appset/core/build.gradle
--- inputbak/play-services-appset/core/build.gradle	2025-04-12 11:01:48.239720914 +0300
+++ input/play-services-appset/core/build.gradle	2025-04-12 11:02:49.186393652 +0300
@@ -28,6 +28,10 @@
         versionName version
         minSdkVersion androidMinSdk
         targetSdkVersion androidTargetSdk
+
+        manifestPlaceholders = [
+                basePackageName: "$basePackageName"
+        ]
     }
 
     sourceSets {
diff -Naur inputbak/play-services-appset/core/src/main/AndroidManifest.xml input/play-services-appset/core/src/main/AndroidManifest.xml
--- inputbak/play-services-appset/core/src/main/AndroidManifest.xml	2025-04-12 11:01:48.239720914 +0300
+++ input/play-services-appset/core/src/main/AndroidManifest.xml	2025-04-12 11:02:49.186393652 +0300
@@ -9,7 +9,7 @@
 
         <service android:name="org.microg.gms.appset.AppSetService">
             <intent-filter>
-                <action android:name="com.google.android.gms.appset.service.START" />
+                <action android:name="${basePackageName}.android.gms.appset.service.START" />
             </intent-filter>
         </service>
     </application>
diff -Naur inputbak/play-services-auth-api-phone/core/build.gradle input/play-services-auth-api-phone/core/build.gradle
--- inputbak/play-services-auth-api-phone/core/build.gradle	2025-04-12 11:01:48.243054248 +0300
+++ input/play-services-auth-api-phone/core/build.gradle	2025-04-12 11:02:49.186393652 +0300
@@ -23,6 +23,10 @@
         versionName version
         minSdkVersion androidMinSdk
         targetSdkVersion androidTargetSdk
+
+        manifestPlaceholders = [
+                basePackageName: "$basePackageName"
+        ]
     }
 
     sourceSets {
diff -Naur inputbak/play-services-auth-api-phone/core/src/main/AndroidManifest.xml input/play-services-auth-api-phone/core/src/main/AndroidManifest.xml
--- inputbak/play-services-auth-api-phone/core/src/main/AndroidManifest.xml	2025-04-12 11:01:48.243054248 +0300
+++ input/play-services-auth-api-phone/core/src/main/AndroidManifest.xml	2025-04-12 11:02:49.186393652 +0300
@@ -27,7 +27,7 @@
             android:name="org.microg.gms.auth.phone.SmsRetrieverService"
             android:exported="true">
             <intent-filter>
-                <action android:name="com.google.android.gms.auth.api.phone.service.SmsRetrieverApiService.START" />
+                <action android:name="${basePackageName}.android.gms.auth.api.phone.service.SmsRetrieverApiService.START" />
 
                 <category android:name="android.intent.category.DEFAULT" />
             </intent-filter>
diff -Naur inputbak/play-services-base/build.gradle input/play-services-base/build.gradle
--- inputbak/play-services-base/build.gradle	2025-04-12 11:01:48.253054249 +0300
+++ input/play-services-base/build.gradle	2025-04-12 11:02:49.189726986 +0300
@@ -30,12 +30,15 @@
 
     buildFeatures {
         aidl = true
+        buildConfig = true
     }
 
     defaultConfig {
         versionName version
         minSdkVersion androidMinSdk
         targetSdkVersion androidTargetSdk
+
+        buildConfigField "String", "BASE_PACKAGE_NAME", "\"$basePackageName\""
     }
 
     compileOptions {
diff -Naur inputbak/play-services-base/core/package/build.gradle input/play-services-base/core/package/build.gradle
--- inputbak/play-services-base/core/package/build.gradle	2025-04-12 11:01:48.253054249 +0300
+++ input/play-services-base/core/package/build.gradle	2025-04-12 11:02:49.189726986 +0300
@@ -22,6 +22,10 @@
         versionName version
         minSdkVersion androidMinSdk
         targetSdkVersion androidTargetSdk
+
+        manifestPlaceholders = [
+                basePackageName: "$basePackageName"
+        ]
     }
 
     sourceSets {
diff -Naur inputbak/play-services-base/core/package/src/main/AndroidManifest.xml input/play-services-base/core/package/src/main/AndroidManifest.xml
--- inputbak/play-services-base/core/package/src/main/AndroidManifest.xml	2025-04-12 11:01:48.253054249 +0300
+++ input/play-services-base/core/package/src/main/AndroidManifest.xml	2025-04-12 11:02:49.189726986 +0300
@@ -15,7 +15,7 @@
             android:name="org.microg.gms.moduleinstall.ModuleInstallService"
             android:exported="true">
             <intent-filter>
-                <action android:name="com.google.android.gms.chimera.container.moduleinstall.ModuleInstallService.START" />
+                <action android:name="${basePackageName}.android.gms.chimera.container.moduleinstall.ModuleInstallService.START" />
                 <category android:name="android.intent.category.DEFAULT" />
             </intent-filter>
         </service>
diff -Naur inputbak/play-services-base/core/src/main/java/org/microg/gms/AbstractGmsServiceBroker.java input/play-services-base/core/src/main/java/org/microg/gms/AbstractGmsServiceBroker.java
--- inputbak/play-services-base/core/src/main/java/org/microg/gms/AbstractGmsServiceBroker.java	2025-04-12 11:01:48.253054249 +0300
+++ input/play-services-base/core/src/main/java/org/microg/gms/AbstractGmsServiceBroker.java	2025-04-12 11:02:49.193060320 +0300
@@ -23,6 +23,7 @@
 import android.os.RemoteException;
 import android.util.Log;
 
+import com.google.android.gms.common.BuildConfig;
 import com.google.android.gms.common.api.Scope;
 import com.google.android.gms.common.internal.*;
 
@@ -235,7 +236,7 @@
         request.gmsVersion = gmsVersion;
         request.packageName = packageName;
         request.extras = extras;
-        request.account = accountName == null ? null : new Account(accountName, "com.google");
+        request.account = accountName == null ? null : new Account(accountName, BuildConfig.BASE_PACKAGE_NAME);
         request.scopes = scopes == null ? null : scopesFromStringArray(scopes);
         getService(callback, request);
     }
diff -Naur inputbak/play-services-base/core/src/main/java/org/microg/gms/common/PackageUtils.java input/play-services-base/core/src/main/java/org/microg/gms/common/PackageUtils.java
--- inputbak/play-services-base/core/src/main/java/org/microg/gms/common/PackageUtils.java	2025-04-12 11:01:48.256387582 +0300
+++ input/play-services-base/core/src/main/java/org/microg/gms/common/PackageUtils.java	2025-04-12 11:02:49.193060320 +0300
@@ -27,6 +27,7 @@
 import android.util.Log;
 
 import androidx.annotation.Nullable;
+import com.google.android.gms.common.BuildConfig;
 import org.microg.gms.utils.ExtendedPackageInfo;
 
 import java.lang.reflect.Method;
@@ -50,6 +51,8 @@
 
     @Deprecated
     public static boolean isGooglePackage(Context context, String packageName) {
+        packageName = PackageSpoofUtils.spoofPackageName(context.getPackageManager(), packageName);
+
         return new ExtendedPackageInfo(context, packageName).isGoogleOrPlatformPackage();
     }
 
@@ -58,7 +61,7 @@
      */
     @Deprecated
     public static boolean callerHasExtendedAccessPermission(Context context) {
-        return context.checkCallingPermission("org.microg.gms.EXTENDED_ACCESS") == PackageManager.PERMISSION_GRANTED;
+        return context.checkCallingPermission(BuildConfig.BASE_PACKAGE_NAME + ".microg.gms.EXTENDED_ACCESS") == PackageManager.PERMISSION_GRANTED;
     }
 
     public static void assertGooglePackagePermission(Context context, GooglePackagePermission permission) {
@@ -73,7 +76,17 @@
 
     public static boolean callerHasGooglePackagePermission(Context context, GooglePackagePermission permission) {
         for (String packageCandidate : getCallingPackageCandidates(context)) {
-            if (new ExtendedPackageInfo(context, packageCandidate).hasGooglePackagePermission(permission)) {
+            String packageName = PackageSpoofUtils.spoofPackageName(
+                    context.getPackageManager(),
+                    packageCandidate
+            );
+
+            // See https://github.com/ReVanced/GmsCore/issues/10.
+            ExtendedPackageInfo extendedPackageInfo = new ExtendedPackageInfo(context, packageName);
+            if (!extendedPackageInfo.isInstalled())
+                return true;
+
+            if (new ExtendedPackageInfo(context, packageName).hasGooglePackagePermission(permission)) {
                 return true;
             }
         }
@@ -142,7 +155,7 @@
             for (Signature sig : info.signatures) {
                 String digest = sha1sum(sig.toByteArray());
                 if (digest != null) {
-                    return digest;
+                    return PackageSpoofUtils.spoofStringSignature(packageManager, packageName, digest);
                 }
             }
         }
@@ -194,7 +207,7 @@
             for (Signature sig : info.signatures) {
                 byte[] digest = sha1bytes(sig.toByteArray());
                 if (digest != null) {
-                    return digest;
+                    return PackageSpoofUtils.spoofBytesSignature(packageManager, packageName, digest);
                 }
             }
         }
@@ -208,7 +221,7 @@
         if (packageName == null) {
             packageName = firstPackageFromUserId(context, callingUid);
         }
-        return packageName;
+        return PackageSpoofUtils.spoofPackageName(context.getPackageManager(), packageName);
     }
 
     public static String[] getCallingPackageCandidates(Context context) {
diff -Naur inputbak/play-services-base/core/src/main/kotlin/org/microg/gms/common/KnownGooglePackages.kt input/play-services-base/core/src/main/kotlin/org/microg/gms/common/KnownGooglePackages.kt
--- inputbak/play-services-base/core/src/main/kotlin/org/microg/gms/common/KnownGooglePackages.kt	2025-04-12 11:01:48.256387582 +0300
+++ input/play-services-base/core/src/main/kotlin/org/microg/gms/common/KnownGooglePackages.kt	2025-04-12 11:02:49.196393653 +0300
@@ -90,6 +90,10 @@
         PERMISSIONS_PRIVILEGED
     ),
     Pair(
+        PackageAndCertHash("com.google.android.apps.youtube", SHA1, "24bb24c05e47e0aefa68a58a766179d9b613a600"),
+        PERMISSIONS_PRIVILEGED
+    ),
+    Pair(
         PackageAndCertHash("com.google.android.apps.youtube.music", SHA1, "afb0fed5eeaebdd86f56a97742f4b6b33ef59875"),
         PERMISSIONS_PRIVILEGED
     ),
diff -Naur inputbak/play-services-base/core/src/main/kotlin/org/microg/gms/common/PackageSpoofUtils.kt input/play-services-base/core/src/main/kotlin/org/microg/gms/common/PackageSpoofUtils.kt
--- inputbak/play-services-base/core/src/main/kotlin/org/microg/gms/common/PackageSpoofUtils.kt	1970-01-01 03:00:00.000000000 +0300
+++ input/play-services-base/core/src/main/kotlin/org/microg/gms/common/PackageSpoofUtils.kt	2025-04-12 11:02:49.196393653 +0300
@@ -0,0 +1,157 @@
+package org.microg.gms.common
+
+import android.content.pm.PackageManager
+import android.os.Bundle
+import android.util.Log
+import com.google.android.gms.common.BuildConfig
+import java.util.*
+
+// Slightly modified implementation from https://github.com/shadow578
+/**
+ * Utilities to spoof package information.
+ */
+object PackageSpoofUtils {
+    private const val TAG = "SpoofUtils"
+    private const val META_SPOOF_PACKAGE_NAME =
+        BuildConfig.BASE_PACKAGE_NAME + ".android.gms.SPOOFED_PACKAGE_NAME"
+    private const val META_SPOOF_PACKAGE_SIGNATURE =
+        BuildConfig.BASE_PACKAGE_NAME + ".android.gms.SPOOFED_PACKAGE_SIGNATURE"
+
+    private val spoofedPackageNameCache = HashMap<String, String>()
+    private val spoofedPackageSignatureCache = HashMap<String, String>()
+
+    /**
+     * Spoof the package name of a package, if a spoofed name is set.
+     *
+     * @param packageManager [PackageManager] used to get package information.
+     * @param realPackageName The real package name.
+     * @return Either the spoofed or the real package name, depending on if the package requested spoofing.
+     */
+    @JvmStatic
+    fun spoofPackageName(
+        packageManager: PackageManager,
+        realPackageName: String?
+    ): String? {
+        if (realPackageName.isNullOrEmpty()) return realPackageName
+
+        val spoofedPackageName = getSpoofedPackageName(packageManager, realPackageName)
+        return if (!spoofedPackageName.isNullOrEmpty()) {
+            Log.i(TAG, "Package name of $realPackageName spoofed to $spoofedPackageName")
+            spoofedPackageName
+        } else realPackageName
+    }
+
+    /**
+     * Spoof the signature of a package, if a spoofed name is set.
+     *
+     * @param packageManager [PackageManager] used to get package information.
+     * @param packageName Name of the package to check.
+     * @param realSignature The real package signature.
+     * @return Either the spoofed or the real signature, depending on if the package requested spoofing.
+     */
+    @JvmStatic
+    @JvmName("spoofStringSignature")
+    fun spoofSignature(
+        packageManager: PackageManager,
+        packageName: String,
+        realSignature: String?
+    ): String? {
+        val spoofedSignature = getSpoofedSignature(packageManager, packageName)
+
+        if (spoofedSignature.isNullOrEmpty()) return realSignature
+
+        Log.i(TAG, "Package signature of $packageName spoofed to $spoofedSignature")
+        return spoofedSignature
+    }
+
+    /**
+     * Spoof the signature of a package, if a spoofed name is set.
+     *
+     * @param packageManager [PackageManager] used to get package information.
+     * @param packageName Name of the package to check.
+     * @param realSignature The real package signature.
+     * @return Either the spoofed or the real signature, depending on if the package requested spoofing.
+     */
+    @JvmStatic
+    @JvmName("spoofBytesSignature")
+    fun spoofSignature(
+        packageManager: PackageManager,
+        packageName: String,
+        realSignature: ByteArray?
+    ): ByteArray? {
+        val spoofedSignatureString = getSpoofedSignature(packageManager, packageName)
+
+        if (spoofedSignatureString.isNullOrEmpty()) return realSignature
+
+        Log.i(TAG, "Package signature of $packageName spoofed to $spoofedSignatureString")
+
+        return spoofedSignatureString.chunked(2)
+            .map { it.toInt(16).toByte() }
+            .toByteArray()
+    }
+
+    /**
+     * Get the spoofed package name for a package.
+     *
+     * @param packageManager [PackageManager] used to get package information.
+     * @param packageName Name of the package to get the spoofed name of.
+     * @return Spoofed name string, or null if none set.
+     */
+    private fun getSpoofedPackageName(
+        packageManager: PackageManager,
+        packageName: String
+    ): String? {
+        return spoofedPackageNameCache[packageName] ?: run {
+            val meta = getPackageMetadata(packageManager, packageName)
+            val spoofedPackageName = meta?.getString(META_SPOOF_PACKAGE_NAME)
+            if (spoofedPackageName != null) {
+                spoofedPackageNameCache[packageName] = spoofedPackageName
+            }
+
+            spoofedPackageName
+        }
+    }
+
+    /**
+     * Get the spoofed package signature for a package.
+     *
+     * @param packageManager [PackageManager] used to get package information.
+     * @param packageName Name of the package to get spoofed signature of.
+     * @return Spoofed signature string, or null if none set.
+     */
+    private fun getSpoofedSignature(
+        packageManager: PackageManager,
+        packageName: String
+    ): String? {
+        return spoofedPackageSignatureCache[packageName] ?: run {
+            val meta = getPackageMetadata(packageManager, packageName)
+            val spoofedSignature = meta?.getString(META_SPOOF_PACKAGE_SIGNATURE)
+            if (spoofedSignature != null) {
+                spoofedPackageSignatureCache[packageName] = spoofedSignature
+            }
+
+            spoofedSignature
+        }
+    }
+
+    /**
+     * Get package metadata.
+     *
+     * @param packageManager [PackageManager] used to get package information.
+     * @param packageName Name of the package to get metadata of.
+     * @return Package metadata bundle.
+     */
+    private fun getPackageMetadata(packageManager: PackageManager, packageName: String): Bundle? {
+        return try {
+            // PackageManager.getPackageInfo() has been deprecated in targetSdkVersion 30+
+            // To solve this, add the QUERY_ALL_PACKAGES permission to AndroidManifest.xml
+            packageManager
+                .getPackageInfo(packageName, PackageManager.GET_META_DATA)
+                ?.applicationInfo
+                ?.metaData
+        } catch (e: PackageManager.NameNotFoundException) {
+            Log.e(TAG, "Failed to get application metadata for $packageName", e)
+            null
+        }
+    }
+}
\ No newline at end of file
diff -Naur inputbak/play-services-base/src/main/java/org/microg/gms/common/MultiConnectionKeeper.java input/play-services-base/src/main/java/org/microg/gms/common/MultiConnectionKeeper.java
--- inputbak/play-services-base/src/main/java/org/microg/gms/common/MultiConnectionKeeper.java	2025-04-12 11:01:48.263054250 +0300
+++ input/play-services-base/src/main/java/org/microg/gms/common/MultiConnectionKeeper.java	2025-04-12 11:02:49.196393653 +0300
@@ -29,6 +29,7 @@
 import android.content.pm.Signature;
 import android.os.IBinder;
 import android.util.Log;
+import com.google.android.gms.base.BuildConfig;
 
 import java.security.MessageDigest;
 import java.security.NoSuchAlgorithmException;
@@ -298,7 +299,7 @@
             if (resolveInfo == null || resolveInfo.serviceInfo == null) return false;
             if (resolveInfo.serviceInfo.name.startsWith("org.microg.")) return true;
             try {
-                PermissionInfo info = context.getPackageManager().getPermissionInfo("org.microg.gms.EXTENDED_ACCESS", 0);
+                PermissionInfo info = context.getPackageManager().getPermissionInfo(BuildConfig.BASE_PACKAGE_NAME + ".microg.gms.EXTENDED_ACCESS", 0);
                 return info.packageName.equals(resolveInfo.serviceInfo.packageName);
             } catch (PackageManager.NameNotFoundException e) {
                 return false;
diff -Naur inputbak/play-services-basement/build.gradle input/play-services-basement/build.gradle
--- inputbak/play-services-basement/build.gradle	2025-04-12 11:01:48.266387583 +0300
+++ input/play-services-basement/build.gradle	2025-04-12 11:02:49.199726987 +0300
@@ -50,7 +50,12 @@
         minSdkVersion androidMinSdk
         targetSdkVersion androidTargetSdk
         buildConfigField "int", "VERSION_CODE", "$appVersionCode"
+        buildConfigField "String", "BASE_PACKAGE_NAME", "\"$basePackageName\""
         consumerProguardFile 'consumer-rules.pro'
+
+        manifestPlaceholders = [
+                basePackageName: "$basePackageName"
+        ]
     }
 
     compileOptions {
diff -Naur inputbak/play-services-basement/src/main/AndroidManifest.xml input/play-services-basement/src/main/AndroidManifest.xml
--- inputbak/play-services-basement/src/main/AndroidManifest.xml	2025-04-12 11:01:48.266387583 +0300
+++ input/play-services-basement/src/main/AndroidManifest.xml	2025-04-12 11:02:49.199726987 +0300
@@ -7,7 +7,7 @@
 <manifest xmlns:android="http://schemas.android.com/apk/res/android">
     <application>
         <meta-data
-                android:name="com.google.android.gms.version"
+                android:name="${basePackageName}.android.gms.version"
                 android:value="@integer/google_play_services_version"/>
     </application>
 </manifest>
diff -Naur inputbak/play-services-basement/src/main/java/org/microg/gms/auth/AuthConstants.java input/play-services-basement/src/main/java/org/microg/gms/auth/AuthConstants.java
--- inputbak/play-services-basement/src/main/java/org/microg/gms/auth/AuthConstants.java	2025-04-12 11:01:48.266387583 +0300
+++ input/play-services-basement/src/main/java/org/microg/gms/auth/AuthConstants.java	2025-04-12 11:02:49.199726987 +0300
@@ -16,6 +16,8 @@
 
 package org.microg.gms.auth;
 
+import com.google.android.gms.common.BuildConfig;
+
 public class AuthConstants {
     public static final String DEFAULT_ACCOUNT = "<<default account>>";
     public static final String SCOPE_GET_ACCOUNT_ID = "^^_account_id_^^";
@@ -23,7 +25,7 @@
     public static final String PROVIDER_METHOD_CLEAR_PASSWORD = "clear_password";
     public static final String PROVIDER_EXTRA_CLEAR_PASSWORD = "clear_password";
     public static final String PROVIDER_EXTRA_ACCOUNTS = "accounts";
-    public static final String DEFAULT_ACCOUNT_TYPE = "com.google";
+    public static final String DEFAULT_ACCOUNT_TYPE = BuildConfig.BASE_PACKAGE_NAME;
     public static final String WORK_ACCOUNT_TYPE = "com.google.work";
 
     public static final String KEY_ACCOUNT_SERVICES = "services";
diff -Naur inputbak/play-services-basement/src/main/java/org/microg/gms/common/Constants.java input/play-services-basement/src/main/java/org/microg/gms/common/Constants.java
--- inputbak/play-services-basement/src/main/java/org/microg/gms/common/Constants.java	2025-04-12 11:01:48.266387583 +0300
+++ input/play-services-basement/src/main/java/org/microg/gms/common/Constants.java	2025-04-12 11:02:49.203060321 +0300
@@ -20,7 +20,8 @@
 
 public class Constants {
     public static final int GMS_VERSION_CODE = (BuildConfig.VERSION_CODE / 1000) * 1000;
-    public static final String GMS_PACKAGE_NAME = "com.google.android.gms";
+    public static final String GOOGLE_SERVICES_PACKAGE_NAME = "com.google.android.gms";
+    public static final String GMS_PACKAGE_NAME = BuildConfig.BASE_PACKAGE_NAME + ".android.gms";
     public static final String USER_MICROG_PACKAGE_NAME = "org.microg.gms";
     public static final String GSF_PACKAGE_NAME = "com.google.android.gsf";
     public static final String GMS_PACKAGE_SIGNATURE_SHA1 = "38918a453d07199354f8b19af05ec6562ced5788";
diff -Naur inputbak/play-services-basement/src/main/java/org/microg/gms/common/GmsService.java input/play-services-basement/src/main/java/org/microg/gms/common/GmsService.java
--- inputbak/play-services-basement/src/main/java/org/microg/gms/common/GmsService.java	2025-04-12 11:01:48.266387583 +0300
+++ input/play-services-basement/src/main/java/org/microg/gms/common/GmsService.java	2025-04-12 11:02:49.203060321 +0300
@@ -16,164 +16,166 @@
 
 package org.microg.gms.common;
 
+import com.google.android.gms.common.BuildConfig;
+
 public enum GmsService {
     UNKNOWN(-2),
     ANY(-1),
-    GAMES(1, "com.google.android.gms.games.service.START", "com.google.android.gms.games.internal.connect.service.START"),
-    PLUS(2, "com.google.android.gms.plus.service.START", "com.google.android.gms.plus.service.internal.START"),
-    PANORAMA(3, "com.google.android.gms.panorama.service.START"),
-    WALLET(4, "com.google.android.gms.wallet.service.BIND"),
-    PEOPLE(5, "com.google.android.gms.people.service.START"),
+    GAMES(1, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.games.service.START", BuildConfig.BASE_PACKAGE_NAME + ".android.gms.games.internal.connect.service.START"),
+    PLUS(2, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.plus.service.START", BuildConfig.BASE_PACKAGE_NAME + ".android.gms.plus.service.internal.START"),
+    PANORAMA(3, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.panorama.service.START"),
+    WALLET(4, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.wallet.service.BIND"),
+    PEOPLE(5, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.people.service.START"),
     LOCATION(6),
-    APPSTATE(7, "com.google.android.gms.appstate.service.START"),
-    ADREQUEST(8, "com.google.android.gms.ads.service.START"),
-    ACCOUNT(9, "com.google.android.gms.accounts.ACCOUNT_SERVICE"),
-    CAST(10, "com.google.android.gms.cast.service.BIND_CAST_DEVICE_CONTROLLER_SERVICE"),
-    DRIVE(11, "com.google.android.gms.drive.ApiService.START"),
-    ADDRESS(12, "com.google.android.gms.identity.service.BIND"),
-    CAR(13, "com.google.android.gms.car.service.START"),
-    WEARABLE(14, "com.google.android.gms.wearable.BIND"),
-    AUTH_PROXY(16, "com.google.android.gms.auth.service.START"),
-    FITNESS(17, "com.google.android.gms.fitness.GoogleFitnessService.START"),
-    REMINDERS(18, "com.google.android.gms.reminders.service.START"),
-    LIGHTWEIGHT_INDEX(19, "com.google.android.gms.icing.LIGHTWEIGHT_INDEX_SERVICE"),
-    DEVICE_CONNECTION(20, "com.google.android.gms.deviceconnection.service.START"),
-    INDEX(21, "com.google.android.gms.icing.INDEX_SERVICE"),
-    LOCATION_REPORTING(22, "com.google.android.gms.location.reporting.service.START", "com.google.android.location.reporting.service.START"),
-    LOCATION_MANAGER(23, "com.google.android.location.internal.GoogleLocationManagerService.START"),
-    PLAY_LOG(24, "com.google.android.gms.playlog.service.START"),
-    DROIDGUARD(25, "com.google.android.gms.droidguard.service.START"),
-    LOCKBOX(26, "com.google.android.gms.lockbox.service.START"),
-    CAST_MIRRORING(27, "com.google.android.gms.cast_mirroring.service.START"),
-    NETWORK_QUALITY(28, "com.google.android.gms.mdm.services.START"),
-    FEEDBACK(29, "com.google.android.gms.feedback.internal.IFeedbackService"),
+    APPSTATE(7, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.appstate.service.START"),
+    ADREQUEST(8, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.ads.service.START"),
+    ACCOUNT(9, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.accounts.ACCOUNT_SERVICE"),
+    CAST(10, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.cast.service.BIND_CAST_DEVICE_CONTROLLER_SERVICE"),
+    DRIVE(11, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.drive.ApiService.START"),
+    ADDRESS(12, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.identity.service.BIND"),
+    CAR(13, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.car.service.START"),
+    WEARABLE(14, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.wearable.BIND"),
+    AUTH_PROXY(16, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.auth.service.START"),
+    FITNESS(17, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.fitness.GoogleFitnessService.START"),
+    REMINDERS(18, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.reminders.service.START"),
+    LIGHTWEIGHT_INDEX(19, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.icing.LIGHTWEIGHT_INDEX_SERVICE"),
+    DEVICE_CONNECTION(20, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.deviceconnection.service.START"),
+    INDEX(21, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.icing.INDEX_SERVICE"),
+    LOCATION_REPORTING(22, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.location.reporting.service.START", BuildConfig.BASE_PACKAGE_NAME + ".android.location.reporting.service.START"),
+    LOCATION_MANAGER(23, BuildConfig.BASE_PACKAGE_NAME + ".android.location.internal.GoogleLocationManagerService.START"),
+    PLAY_LOG(24, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.playlog.service.START"),
+    DROIDGUARD(25, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.droidguard.service.START"),
+    LOCKBOX(26, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.lockbox.service.START"),
+    CAST_MIRRORING(27, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.cast_mirroring.service.START"),
+    NETWORK_QUALITY(28, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.mdm.services.START"),
+    FEEDBACK(29, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.feedback.internal.IFeedbackService"),
     SEARCH_ADMINISTRATION(30),
-    PHOTO_AUTO_BACKUP(31, "com.google.android.gms.photos.autobackup.service.START"),
+    PHOTO_AUTO_BACKUP(31, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.photos.autobackup.service.START"),
     SEARCH_QUERIES(32),
     SEARCH_GLOBAL(33),
-    UDC(35, "com.google.android.gms.udc.service.START"),
+    UDC(35, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.udc.service.START"),
     SEARCH_CORPORA(36),
-    DEVICE_MANAGER(37, "com.google.android.gms.mdm.services.DeviceManagerApiService.START"),
-    PSEUDONYMOUS_ID(38, "com.google.android.gms.pseudonymous.service.START"),
-    COMMON(39, "com.google.android.gms.common.service.START"),
-    CLEARCUT_LOGGER(40, "com.google.android.gms.clearcut.service.START"),
-    USAGE_REPORTING(41, "com.google.android.gms.usagereporting.service.START"),
-    KIDS(42, "com.google.android.gms.kids.service.START"),
-    DOWNLOAD(43, "com.google.android.gms.common.download.START"),
-    SIGN_IN(44, "com.google.android.gms.signin.service.START"),
-    SAFETY_NET_CLIENT(45, "com.google.android.gms.safetynet.service.START"),
-    GSERVICES(46, "com.google.android.gms.ads.gservice.START"),
-    CONTEXT_MANAGER(47, "com.google.android.contextmanager.service.ContextManagerService.START"),
-    AUDIO_MODEM(48, "com.google.android.gms.audiomodem.service.AudioModemService.START"),
-    NEARBY_SHARING(49, "com.google.android.gms.nearby.sharing.service.NearbySharingService.START"),
-    LIGHTWEIGHT_NETWORK_QUALITY(50, "com.google.android.gms.herrevad.services.LightweightNetworkQualityAndroidService.START"),
-    PHENOTYPE(51, "com.google.android.gms.phenotype.service.START"),
-    VOICE_UNLOCK(52, "com.google.android.gms.speech.service.START"),
-    NEARBY_CONNECTIONS(54, "com.google.android.gms.nearby.connection.service.START"),
-    FITNESS_SENSORS(55, "com.google.android.gms.fitness.SensorsApi"),
-    FITNESS_RECORDING(56, "com.google.android.gms.fitness.RecordingApi"),
-    FITNESS_HISTORY(57, "com.google.android.gms.fitness.HistoryApi"),
-    FITNESS_SESSIONS(58, "com.google.android.gms.fitness.SessionsApi"),
-    FITNESS_BLE(59, "com.google.android.gms.fitness.BleApi"),
-    FITNESS_CONFIG(60, "com.google.android.gms.fitness.ConfigApi"),
-    FITNESS_INTERNAL(61, "com.google.android.gms.fitness.InternalApi"),
-    NEARBY_MESSAGES(62, "com.google.android.gms.nearby.messages.service.NearbyMessagesService.START"),
-    HELP(63, "com.google.android.gms.googlehelp.service.GoogleHelpService.START"),
-    CONFIG(64, "com.google.android.gms.config.START"),
-    GEODATA(65, "com.google.android.gms.location.places.GeoDataApi"),
+    DEVICE_MANAGER(37, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.mdm.services.DeviceManagerApiService.START"),
+    PSEUDONYMOUS_ID(38, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.pseudonymous.service.START"),
+    COMMON(39, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.common.service.START"),
+    CLEARCUT_LOGGER(40, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.clearcut.service.START"),
+    USAGE_REPORTING(41, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.usagereporting.service.START"),
+    KIDS(42, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.kids.service.START"),
+    DOWNLOAD(43, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.common.download.START"),
+    SIGN_IN(44, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.signin.service.START"),
+    SAFETY_NET_CLIENT(45, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.safetynet.service.START"),
+    GSERVICES(46, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.ads.gservice.START"),
+    CONTEXT_MANAGER(47, BuildConfig.BASE_PACKAGE_NAME + ".android.contextmanager.service.ContextManagerService.START"),
+    AUDIO_MODEM(48, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.audiomodem.service.AudioModemService.START"),
+    NEARBY_SHARING(49, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.nearby.sharing.service.NearbySharingService.START"),
+    LIGHTWEIGHT_NETWORK_QUALITY(50, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.herrevad.services.LightweightNetworkQualityAndroidService.START"),
+    PHENOTYPE(51, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.phenotype.service.START"),
+    VOICE_UNLOCK(52, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.speech.service.START"),
+    NEARBY_CONNECTIONS(54, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.nearby.connection.service.START"),
+    FITNESS_SENSORS(55, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.fitness.SensorsApi"),
+    FITNESS_RECORDING(56, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.fitness.RecordingApi"),
+    FITNESS_HISTORY(57, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.fitness.HistoryApi"),
+    FITNESS_SESSIONS(58, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.fitness.SessionsApi"),
+    FITNESS_BLE(59, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.fitness.BleApi"),
+    FITNESS_CONFIG(60, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.fitness.ConfigApi"),
+    FITNESS_INTERNAL(61, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.fitness.InternalApi"),
+    NEARBY_MESSAGES(62, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.nearby.messages.service.NearbyMessagesService.START"),
+    HELP(63, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.googlehelp.service.GoogleHelpService.START"),
+    CONFIG(64, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.config.START"),
+    GEODATA(65, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.location.places.GeoDataApi"),
     SEARCH_IME(66),
-    PLACE_DETECTION(67, "com.google.android.gms.location.places.PlaceDetectionApi"),
-    CREDENTIALS(68, "com.google.android.gms.auth.api.credentials.service.START"),
-    NEARBY_BOOTSTRAP(69, "com.google.android.gms.nearby.bootstrap.service.NearbyBootstrapService.START"),
+    PLACE_DETECTION(67, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.location.places.PlaceDetectionApi"),
+    CREDENTIALS(68, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.auth.api.credentials.service.START"),
+    NEARBY_BOOTSTRAP(69, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.nearby.bootstrap.service.NearbyBootstrapService.START"),
     PLUS_INTERNAL(70),
-    SOURCE_DEVICE(75, "com.google.android.gms.smartdevice.d2d.SourceDeviceService.START"),
-    TARGET_DEVICE(76, "com.google.android.gms.smartdevice.d2d.TargetDeviceService.START"),
-    APP_INVITE(77, "com.google.android.gms.appinvite.service.START"),
-    TAP_AND_PAY(79, "com.google.android.gms.tapandpay.service.BIND"),
-    CHROME_SYNC(80, "com.google.android.gms.chromesync.service.START"),
-    ACCOUNTS(81, "com.google.android.gms.smartdevice.setup.accounts.AccountsService.START"),
-    CAST_REMOTE_DISPLAY(83, "com.google.android.gms.cast.remote_display.service.START"),
-    TRUST_AGENT(85, "com.google.android.gms.trustagent.StateApi.START"),
-    AUTH_SIGN_IN(91, "com.google.android.gms.auth.api.signin.service.START"),
-    MEASUREMENT(93, "com.google.android.gms.measurement.START"),
-    FREIGHTER(98, "com.google.android.gms.freighter.service.START"),
-    GUNS(110, "com.google.android.gms.notifications.service.START"),
-    BLE(111, "com.google.android.gms.beacon.internal.IBleService.START"),
+    SOURCE_DEVICE(75, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.smartdevice.d2d.SourceDeviceService.START"),
+    TARGET_DEVICE(76, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.smartdevice.d2d.TargetDeviceService.START"),
+    APP_INVITE(77, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.appinvite.service.START"),
+    TAP_AND_PAY(79, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.tapandpay.service.BIND"),
+    CHROME_SYNC(80, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.chromesync.service.START"),
+    ACCOUNTS(81, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.smartdevice.setup.accounts.AccountsService.START"),
+    CAST_REMOTE_DISPLAY(83, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.cast.remote_display.service.START"),
+    TRUST_AGENT(85, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.trustagent.StateApi.START"),
+    AUTH_SIGN_IN(91, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.auth.api.signin.service.START"),
+    MEASUREMENT(93, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.measurement.START"),
+    FREIGHTER(98, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.freighter.service.START"),
+    GUNS(110, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.notifications.service.START"),
+    BLE(111, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.beacon.internal.IBleService.START"),
     FIREBASE_AUTH(112, "com.google.firebase.auth.api.gms.service.START"),
     APP_INDEXING(113),
-    GASS(116, "com.google.android.gms.gass.START"),
-    WORK_ACCOUNT(120, "com.google.android.gms.auth.account.workaccount.START"),
-    INSTANT_APPS(121, "com.google.android.gms.instantapps.START"),
-    CAST_FIRSTPATY(122, "com.google.android.gms.cast.firstparty.START"),
-    AD_CACHE(123, "com.google.android.gms.ads.service.CACHE"),
-    SMS_RETRIEVER(126, "com.google.android.gms.auth.api.phone.service.SmsRetrieverApiService.START"),
-    CRYPT_AUTH(129, "com.google.android.gms.auth.cryptauth.cryptauthservice.START"),
+    GASS(116, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.gass.START"),
+    WORK_ACCOUNT(120, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.auth.account.workaccount.START"),
+    INSTANT_APPS(121, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.instantapps.START"),
+    CAST_FIRSTPATY(122, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.cast.firstparty.START"),
+    AD_CACHE(123, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.ads.service.CACHE"),
+    SMS_RETRIEVER(126, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.auth.api.phone.service.SmsRetrieverApiService.START"),
+    CRYPT_AUTH(129, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.auth.cryptauth.cryptauthservice.START"),
     DYNAMIC_LINKS(131, "com.google.firebase.dynamiclinks.service.START"),
-    FONTS(132, "com.google.android.gms.fonts.service.START"),
-    ROMANESCO(135, "com.google.android.gms.romanesco.service.START"),
-    TRAINER(139, "com.google.android.gms.learning.trainer.START"),
-    FIDO2_REGULAR(148, "com.google.android.gms.fido.fido2.regular.START"),
-    FIDO2_PRIVILEGED(149, "com.google.android.gms.fido.fido2.privileged.START"),
-    DATA_DOWNLOAD(152, "com.google.android.mdd.service.START"),
-    ACCOUNT_DATA(153, "com.google.android.gms.auth.account.data.service.START"),
-    CONSTELLATION(155, "com.google.android.gms.constellation.service.START"),
-    AUDIT(154, "com.google.android.gms.audit.service.START"),
-    SYSTEM_UPDATE(157, "com.google.android.gms.update.START_API_SERVICE"),
-    MOBSTORE(160, "com.google.android.mobstore.service.START"),
-    USER_LOCATION(163, "com.google.android.gms.userlocation.service.START"),
-    AD_HTTP(166, "com.google.android.gms.ads.service.HTTP"),
-    LANGUAGE_PROFILE(167, "com.google.android.gms.languageprofile.service.START"),
-    MDNS(168, "com.google.android.gms.mdns.service.START"),
-    SEMANTIC_LOCATION(173, "com.google.android.gms.semanticlocation.service.START_ODLH"),
-    FIDO2_ZEROPARTY(180, "com.google.android.gms.fido.fido2.zeroparty.START"),
-    G1_RESTORE(181, "com.google.android.gms.backup.G1_RESTORE"),
-    G1_BACKUP(182, "com.google.android.gms.backup.G1_BACKUP"),
-    OSS_LICENSES(185, "com.google.android.gms.oss.licenses.service.START"),
-    PAYSE(188, "com.google.android.gms.payse.service.BIND"),
-    RCS(189, "com.google.android.gms.rcs.START"),
-    CARRIER_AUTH(191, "com.google.android.gms.carrierauth.service.START"),
-    SYSTEM_UPDATE_SINGLE_UESR(192, "com.google.android.gms.update.START_SINGLE_USER_API_SERVICE"),
-    APP_USAGE(193, "com.google.android.gms.appusage.service.START"),
-    NEARBY_SHARING_2(194, "com.google.android.gms.nearby.sharing.START_SERVICE"),
-    AD_CONSENT_LOOKUP(195, "com.google.android.gms.ads.service.CONSENT_LOOKUP"),
-    CREDENTIAL_MANAGER(196, "com.google.android.gms.credential.manager.service.firstparty.START"),
-    PHONE_INTERNAL(197, "com.google.android.gms.auth.api.phone.service.InternalService.START"),
-    PAY(198, "com.google.android.gms.pay.service.BIND", "com.google.android.gms.pay.service.THIRD_PARTY"),
-    ASTERISM(199, "com.google.android.gms.asterism.service.START"),
-    MODULE_RESTORE(201, "com.google.android.gms.backup.GMS_MODULE_RESTORE"),
-    FACS_CACHE(202, "com.google.android.gms.facs.cache.service.START"),
-    RECAPTCHA(205, "com.google.android.gms.recaptcha.service.START"),
-    CONTACT_SYNC(208, "com.google.android.gms.people.contactssync.service.START"),
-    IDENTITY_SIGN_IN(212, "com.google.android.gms.auth.api.identity.service.signin.START"),
-    CREDENTIAL_STORE(214, "com.google.android.gms.fido.credentialstore.internal_service.START"),
-    MDI_SYNC(215, "com.google.android.gms.mdisync.service.START"),
-    EVENT_ATTESTATION(216, "com.google.android.gms.ads.identifier.service.EVENT_ATTESTATION"),
-    SCHEDULER(218, "com.google.android.gms.scheduler.ACTION_PROXY_SCHEDULE"),
-    AUTHORIZATION(219, "com.google.android.gms.auth.api.identity.service.authorization.START"),
-    FACS_SYNC(220, "com.google.android.gms.facs.internal.service.START"),
-    AUTH_CONFIG_SYNC(221, "com.google.android.gms.auth.config.service.START"),
-    CREDENTIAL_SAVING(223, "com.google.android.gms.auth.api.identity.service.credentialsaving.START"),
-    GOOGLE_AUTH(224, "com.google.android.gms.auth.account.authapi.START"),
-    ENTERPRISE_LOADER(225, "com.google.android.gms.enterprise.loader.service.START"),
-    THUNDERBIRD(226, "com.google.android.gms.thunderbird.service.START"),
-    NEARBY_EXPOSURE(236, "com.google.android.gms.nearby.exposurenotification.START"),
-    GMS_COMPLIANCE(257, "com.google.android.gms.gmscompliance.service.START"),
-    BLOCK_STORE(258, "com.google.android.gms.auth.blockstore.service.START"),
-    FIDO_SOURCE_DEVICE(262, "com.google.android.gms.fido.sourcedevice.service.START"),
-    FAST_PAIR(265, "com.google.android.gms.nearby.fastpair.START"),
-    MATCHSTICK_LIGHTER(268, "com.google.android.gms.matchstick.lighter.service.START"),
-    FIDO_TARGET_DEVICE_INTERNAL(269, "com.google.android.gms.fido.targetdevice.internal_service.START"),
-    TELEMETRY(270, "com.google.android.gms.common.telemetry.service.START"),
-    SECOND_DEVICE_AUTH(275, "com.google.android.gms.setup.auth.SecondDeviceAuth.START"),
-    LOCATION_SHARING_REPORTER(277, "com.google.android.gms.locationsharingreporter.service.START"),
-    OCR(279, "com.google.android.gms.ocr.service.START"),
-    POTOKENS(285, "com.google.android.gms.potokens.service.START"),
-    OCR_INTERNAL(281, "com.google.android.gms.ocr.service.internal.START"),
-    APP_SET(300, "com.google.android.gms.appset.service.START"),
-    THREAD_NETWORK(305, "com.google.android.gms.threadnetwork.service.START"),
-    MODULE_INSTALL(308, "com.google.android.gms.chimera.container.moduleinstall.ModuleInstallService.START"),
-    IN_APP_REACH(315, "com.google.android.gms.inappreach.service.START"),
-    APP_ERRORS(334, "com.google.android.gms.apperrors.service.START_APP_ERROR"),
+    FONTS(132, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.fonts.service.START"),
+    ROMANESCO(135, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.romanesco.service.START"),
+    TRAINER(139, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.learning.trainer.START"),
+    FIDO2_REGULAR(148, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.fido.fido2.regular.START"),
+    FIDO2_PRIVILEGED(149, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.fido.fido2.privileged.START"),
+    DATA_DOWNLOAD(152, BuildConfig.BASE_PACKAGE_NAME + ".android.mdd.service.START"),
+    ACCOUNT_DATA(153, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.auth.account.data.service.START"),
+    CONSTELLATION(155, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.constellation.service.START"),
+    AUDIT(154, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.audit.service.START"),
+    SYSTEM_UPDATE(157, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.update.START_API_SERVICE"),
+    MOBSTORE(160, BuildConfig.BASE_PACKAGE_NAME + ".android.mobstore.service.START"),
+    USER_LOCATION(163, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.userlocation.service.START"),
+    AD_HTTP(166, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.ads.service.HTTP"),
+    LANGUAGE_PROFILE(167, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.languageprofile.service.START"),
+    MDNS(168, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.mdns.service.START"),
+    SEMANTIC_LOCATION(173, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.semanticlocation.service.START_ODLH"),
+    FIDO2_ZEROPARTY(180, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.fido.fido2.zeroparty.START"),
+    G1_RESTORE(181, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.backup.G1_RESTORE"),
+    G1_BACKUP(182, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.backup.G1_BACKUP"),
+    OSS_LICENSES(185, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.oss.licenses.service.START"),
+    PAYSE(188, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.payse.service.BIND"),
+    RCS(189, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.rcs.START"),
+    CARRIER_AUTH(191, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.carrierauth.service.START"),
+    SYSTEM_UPDATE_SINGLE_UESR(192, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.update.START_SINGLE_USER_API_SERVICE"),
+    APP_USAGE(193, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.appusage.service.START"),
+    NEARBY_SHARING_2(194, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.nearby.sharing.START_SERVICE"),
+    AD_CONSENT_LOOKUP(195, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.ads.service.CONSENT_LOOKUP"),
+    CREDENTIAL_MANAGER(196, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.credential.manager.service.firstparty.START"),
+    PHONE_INTERNAL(197, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.auth.api.phone.service.InternalService.START"),
+    PAY(198, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.pay.service.BIND", BuildConfig.BASE_PACKAGE_NAME + ".android.gms.pay.service.THIRD_PARTY"),
+    ASTERISM(199, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.asterism.service.START"),
+    MODULE_RESTORE(201, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.backup.GMS_MODULE_RESTORE"),
+    FACS_CACHE(202, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.facs.cache.service.START"),
+    RECAPTCHA(205, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.recaptcha.service.START"),
+    CONTACT_SYNC(208, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.people.contactssync.service.START"),
+    IDENTITY_SIGN_IN(212, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.auth.api.identity.service.signin.START"),
+    CREDENTIAL_STORE(214, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.fido.credentialstore.internal_service.START"),
+    MDI_SYNC(215, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.mdisync.service.START"),
+    EVENT_ATTESTATION(216, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.ads.identifier.service.EVENT_ATTESTATION"),
+    SCHEDULER(218, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.scheduler.ACTION_PROXY_SCHEDULE"),
+    AUTHORIZATION(219, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.auth.api.identity.service.authorization.START"),
+    FACS_SYNC(220, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.facs.internal.service.START"),
+    AUTH_CONFIG_SYNC(221, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.auth.config.service.START"),
+    CREDENTIAL_SAVING(223, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.auth.api.identity.service.credentialsaving.START"),
+    GOOGLE_AUTH(224, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.auth.account.authapi.START"),
+    ENTERPRISE_LOADER(225, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.enterprise.loader.service.START"),
+    THUNDERBIRD(226, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.thunderbird.service.START"),
+    NEARBY_EXPOSURE(236, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.nearby.exposurenotification.START"),
+    GMS_COMPLIANCE(257, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.gmscompliance.service.START"),
+    BLOCK_STORE(258, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.auth.blockstore.service.START"),
+    FIDO_SOURCE_DEVICE(262, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.fido.sourcedevice.service.START"),
+    FAST_PAIR(265, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.nearby.fastpair.START"),
+    MATCHSTICK_LIGHTER(268, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.matchstick.lighter.service.START"),
+    FIDO_TARGET_DEVICE_INTERNAL(269, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.fido.targetdevice.internal_service.START"),
+    TELEMETRY(270, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.common.telemetry.service.START"),
+    SECOND_DEVICE_AUTH(275, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.setup.auth.SecondDeviceAuth.START"),
+    LOCATION_SHARING_REPORTER(277, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.locationsharingreporter.service.START"),
+    OCR(279, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.ocr.service.START"),
+    POTOKENS(285, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.potokens.service.START"),
+    OCR_INTERNAL(281, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.ocr.service.internal.START"),
+    APP_SET(300, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.appset.service.START"),
+    THREAD_NETWORK(305, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.threadnetwork.service.START"),
+    MODULE_INSTALL(308, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.chimera.container.moduleinstall.ModuleInstallService.START"),
+    IN_APP_REACH(315, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.inappreach.service.START"),
+    APP_ERRORS(334, BuildConfig.BASE_PACKAGE_NAME + ".android.gms.apperrors.service.START_APP_ERROR"),
     ;
 
     public int SERVICE_ID;
@@ -188,7 +190,7 @@
 
     public interface ADVERTISING_ID {
         // Has no service id
-        String ACTION = "com.google.android.gms.ads.identifier.service.START";
+        String ACTION = BuildConfig.BASE_PACKAGE_NAME + ".android.gms.ads.identifier.service.START";
     }
 
     public static GmsService byServiceId(int serviceId) {
diff -Naur inputbak/play-services-basement/src/main/java/org/microg/gms/gcm/GcmConstants.java input/play-services-basement/src/main/java/org/microg/gms/gcm/GcmConstants.java
--- inputbak/play-services-basement/src/main/java/org/microg/gms/gcm/GcmConstants.java	2025-04-12 11:01:48.266387583 +0300
+++ input/play-services-basement/src/main/java/org/microg/gms/gcm/GcmConstants.java	2025-04-12 11:02:49.206393654 +0300
@@ -16,18 +16,20 @@
 
 package org.microg.gms.gcm;
 
+import com.google.android.gms.common.BuildConfig;
+
 public final class GcmConstants {
-    public static final String ACTION_C2DM_RECEIVE = "com.google.android.c2dm.intent.RECEIVE";
-    public static final String ACTION_C2DM_REGISTER = "com.google.android.c2dm.intent.REGISTER";
-    public static final String ACTION_C2DM_REGISTRATION = "com.google.android.c2dm.intent.REGISTRATION";
-    public static final String ACTION_C2DM_UNREGISTER = "com.google.android.c2dm.intent.UNREGISTER";
-    public static final String ACTION_GCM_SEND = "com.google.android.gcm.intent.SEND";
-    public static final String ACTION_NOTIFICATION_OPEN = "com.google.android.gms.gcm.NOTIFICATION_OPEN";
-    public static final String ACTION_NOTIFICATION_DISMISS = "com.google.android.gms.gcm.NOTIFICATION_DISMISS";
-    public static final String ACTION_SCHEDULE = "com.google.android.gms.gcm.ACTION_SCHEDULE";
-    public static final String ACTION_TASK_READY = "com.google.android.gms.gcm.ACTION_TASK_READY";
-    public static final String ACTION_TASK_INITIALZE = "com.google.android.gms.gcm.SERVICE_ACTION_INITIALIZE";
-    public static final String ACTION_INSTANCE_ID = "com.google.android.gms.iid.InstanceID";
+    public static final String ACTION_C2DM_RECEIVE = BuildConfig.BASE_PACKAGE_NAME + ".android.c2dm.intent.RECEIVE";
+    public static final String ACTION_C2DM_REGISTER = BuildConfig.BASE_PACKAGE_NAME + ".android.c2dm.intent.REGISTER";
+    public static final String ACTION_C2DM_REGISTRATION = BuildConfig.BASE_PACKAGE_NAME + ".android.c2dm.intent.REGISTRATION";
+    public static final String ACTION_C2DM_UNREGISTER = BuildConfig.BASE_PACKAGE_NAME + ".android.c2dm.intent.UNREGISTER";
+    public static final String ACTION_GCM_SEND = BuildConfig.BASE_PACKAGE_NAME + ".android.gcm.intent.SEND";
+    public static final String ACTION_NOTIFICATION_OPEN = BuildConfig.BASE_PACKAGE_NAME + ".android.gms.gcm.NOTIFICATION_OPEN";
+    public static final String ACTION_NOTIFICATION_DISMISS = BuildConfig.BASE_PACKAGE_NAME + ".android.gms.gcm.NOTIFICATION_DISMISS";
+    public static final String ACTION_SCHEDULE = BuildConfig.BASE_PACKAGE_NAME + ".android.gms.gcm.ACTION_SCHEDULE";
+    public static final String ACTION_TASK_READY = BuildConfig.BASE_PACKAGE_NAME + ".android.gms.gcm.ACTION_TASK_READY";
+    public static final String ACTION_TASK_INITIALZE = BuildConfig.BASE_PACKAGE_NAME + ".android.gms.gcm.SERVICE_ACTION_INITIALIZE";
+    public static final String ACTION_INSTANCE_ID = BuildConfig.BASE_PACKAGE_NAME + ".android.gms.iid.InstanceID";
 
     public static final String EXTRA_APP = "app";
     public static final String EXTRA_APP_OVERRIDE = "org.microg.gms.gcm.APP_OVERRIDE";
@@ -49,7 +51,7 @@
     public static final String EXTRA_MESSAGE_TYPE = "message_type";
     public static final String EXTRA_MESSAGE_ID = "google.message_id";
     public static final String EXTRA_OS_VERSION = "osv";
-    public static final String EXTRA_PENDING_INTENT = "com.google.android.gms.gcm.PENDING_INTENT";
+    public static final String EXTRA_PENDING_INTENT = BuildConfig.BASE_PACKAGE_NAME + ".android.gms.gcm.PENDING_INTENT";
     public static final String EXTRA_PUBLIC_KEY = "pub2";
     public static final String EXTRA_RAWDATA = "rawData";
     public static final String EXTRA_RAWDATA_BASE64 = "gcm.rawData64";
@@ -80,10 +82,10 @@
     public static final String SCHEDULER_ACTION_CANCEL_ALL = "CANCEL_ALL";
     public static final String SCHEDULER_ACTION_SCHEDULE = "SCHEDULE_TASK";
 
-    public static final String PERMISSION_GTALK = "com.google.android.gtalkservice.permission.GTALK_SERVICE";
-    public static final String PERMISSION_NETWORK_TASK = "com.google.android.gms.permission.BIND_NETWORK_TASK_SERVICE";
-    public static final String PERMISSION_RECEIVE = "com.google.android.c2dm.permission.RECEIVE";
-    public static final String PERMISSION_SEND = "com.google.android.c2dm.permission.SEND";
+    public static final String PERMISSION_GTALK = BuildConfig.BASE_PACKAGE_NAME + ".android.gtalkservice.permission.GTALK_SERVICE";
+    public static final String PERMISSION_NETWORK_TASK = BuildConfig.BASE_PACKAGE_NAME + ".android.gms.permission.BIND_NETWORK_TASK_SERVICE";
+    public static final String PERMISSION_RECEIVE = BuildConfig.BASE_PACKAGE_NAME + ".android.c2dm.permission.RECEIVE";
+    public static final String PERMISSION_SEND = BuildConfig.BASE_PACKAGE_NAME + ".android.c2dm.permission.SEND";
 
     public static final String ERROR_SERVICE_NOT_AVAILABLE = "SERVICE_NOT_AVAILABLE";
 
diff -Naur inputbak/play-services-cast/core/build.gradle input/play-services-cast/core/build.gradle
--- inputbak/play-services-cast/core/build.gradle	2025-04-12 11:01:48.269720917 +0300
+++ input/play-services-cast/core/build.gradle	2025-04-12 11:02:49.206393654 +0300
@@ -32,6 +32,10 @@
         versionName version
         minSdkVersion androidMinSdk
         targetSdkVersion androidTargetSdk
+
+        manifestPlaceholders = [
+                basePackageName: "$basePackageName"
+        ]
     }
 
     buildFeatures {
diff -Naur inputbak/play-services-cast/core/src/main/AndroidManifest.xml input/play-services-cast/core/src/main/AndroidManifest.xml
--- inputbak/play-services-cast/core/src/main/AndroidManifest.xml	2025-04-12 11:01:48.269720917 +0300
+++ input/play-services-cast/core/src/main/AndroidManifest.xml	2025-04-12 11:02:49.206393654 +0300
@@ -15,7 +15,7 @@
 
         <service android:name="org.microg.gms.cast.CastDeviceControllerService">
             <intent-filter>
-                <action android:name="com.google.android.gms.cast.service.BIND_CAST_DEVICE_CONTROLLER_SERVICE" />
+                <action android:name="${basePackageName}.android.gms.cast.service.BIND_CAST_DEVICE_CONTROLLER_SERVICE" />
             </intent-filter>
         </service>
     </application>
diff -Naur inputbak/play-services-cast-framework/build.gradle input/play-services-cast-framework/build.gradle
--- inputbak/play-services-cast-framework/build.gradle	2025-04-12 11:01:48.269720917 +0300
+++ input/play-services-cast-framework/build.gradle	2025-04-12 11:02:49.206393654 +0300
@@ -21,6 +21,10 @@
         versionName version
         minSdkVersion androidMinSdk
         targetSdkVersion androidTargetSdk
+
+        manifestPlaceholders = [
+                basePackageName: "$basePackageName"
+        ]
     }
 
     compileOptions {
diff -Naur inputbak/play-services-cast-framework/src/main/AndroidManifest.xml input/play-services-cast-framework/src/main/AndroidManifest.xml
--- inputbak/play-services-cast-framework/src/main/AndroidManifest.xml	2025-04-12 11:01:48.269720917 +0300
+++ input/play-services-cast-framework/src/main/AndroidManifest.xml	2025-04-12 11:02:49.209726988 +0300
@@ -9,21 +9,21 @@
     <uses-permission android:name="android.permission.FOREGROUND_SERVICE"/>
 
     <queries>
-        <package android:name="com.google.android.gms.policy_cast_dynamite"/>
+        <package android:name="${basePackageName}.android.gms.policy_cast_dynamite"/>
     </queries>
 
     <application>
         <receiver
-                android:name="com.google.android.gms.cast.framework.media.MediaIntentReceiver"
+                android:name="${basePackageName}.android.gms.cast.framework.media.MediaIntentReceiver"
                 android:exported="false"/>
 
         <service
-                android:name="com.google.android.gms.cast.framework.media.MediaNotificationService"
+                android:name="${basePackageName}.android.gms.cast.framework.media.MediaNotificationService"
                 android:exported="false"
                 android:foregroundServiceType="mediaPlayback"/>
 
         <service
-                android:name="com.google.android.gms.cast.framework.ReconnectionService"
+                android:name="${basePackageName}.android.gms.cast.framework.ReconnectionService"
                 android:exported="false"/>
     </application>
 
diff -Naur inputbak/play-services-core/build.gradle input/play-services-core/build.gradle
--- inputbak/play-services-core/build.gradle	2025-04-12 11:01:48.276387584 +0300
+++ input/play-services-core/build.gradle	2025-04-12 11:02:49.209726988 +0300
@@ -116,6 +116,8 @@
     }
 
     defaultConfig {
+        applicationId "${basePackageName}.android.gms"
+
         versionName version
         versionCode appVersionCode
 
@@ -125,7 +127,6 @@
         multiDexEnabled true
         multiDexKeepProguard file('multidex-keep.pro')
 
-        manifestPlaceholders = [appLabel:"@string/gms_app_name"]
         resValue "string", "package_id", "com.google.android.gms"
 
         buildConfigField "String", "SAFETYNET_KEY", "\"${localProperties.get("safetynet.key", "")}\""
@@ -134,6 +135,19 @@
         buildConfigField "String", "RECAPTCHA_ENTERPRISE_PROJECT_ID", "\"${localProperties.get("recaptchaEnterpreise.projectId", "")}\""
         buildConfigField "String", "RECAPTCHA_ENTERPRISE_SITE_KEY", "\"${localProperties.get("recaptchaEnterpreise.siteKey", "")}\""
         buildConfigField "String", "RECAPTCHA_ENTERPRISE_API_KEY", "\"${localProperties.get("recaptchaEnterpreise.apiKey", "")}\""
+        buildConfigField "String", "BASE_PACKAGE_NAME", "\"$basePackageName\""
+
+        manifestPlaceholders = [
+                basePackageName: "$basePackageName",
+		appLabel: "@string/gms_app_name"
+        ]
+
+        resValue "string", "base_package_name", "$basePackageName"
+        resValue "string", "application_id", "$applicationId"
+        resValue "string", "var_pref_auth_action_security_settings", "${basePackageName}.android.gms.accountsettings.SECURITY_SETTINGS"
+        resValue "string", "var_pref_auth_action_privacy_settings", "${basePackageName}.android.gms.accountsettings.PRIVACY_SETTINGS"
+        resValue "string", "var_pref_auth_action_preferences_settings", "${basePackageName}.android.gms.accountsettings.ACCOUNT_PREFERENCES_SETTINGS"
+        resValue "string", "var_pref_start_gms_package", "${basePackageName}.android.gms"
 
         ndk {
             abiFilters "armeabi-v7a", "arm64-v8a", "x86", "x86_64"
diff -Naur inputbak/play-services-core/src/main/AndroidManifest.xml input/play-services-core/src/main/AndroidManifest.xml
--- inputbak/play-services-core/src/main/AndroidManifest.xml	2025-04-12 11:01:48.279720918 +0300
+++ input/play-services-core/src/main/AndroidManifest.xml	2025-04-12 11:02:49.213060322 +0300
@@ -17,70 +17,70 @@
     xmlns:tools="http://schemas.android.com/tools">
 
     <permission
-        android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"
+        android:name="${basePackageName}.android.providers.gsf.permission.READ_GSERVICES"
         android:label="@string/perm_gsf_read_gservices_label"
         android:protectionLevel="normal" />
     <permission
-        android:name="com.google.android.c2dm.permission.RECEIVE"
+        android:name="${basePackageName}.android.c2dm.permission.RECEIVE"
         android:label="@string/perm_c2dm_receive_label"
         android:permissionGroup="android.permission-group.NETWORK"
         android:protectionLevel="normal" />
     <permission
-        android:name="com.google.android.c2dm.permission.SEND"
+        android:name="${basePackageName}.android.c2dm.permission.SEND"
         android:label="@string/perm_c2dm_send_label"
         android:permissionGroup="android.permission-group.NETWORK"
         android:protectionLevel="privileged|signature" />
     <permission
-        android:name="com.google.android.gtalkservice.permission.GTALK_SERVICE"
+        android:name="${basePackageName}.android.gtalkservice.permission.GTALK_SERVICE"
         android:label="@string/perm_gtalk_svc_label"
         android:permissionGroup="android.permission-group.MESSAGES"
         android:protectionLevel="signature" />
 
     <permission-tree
-        android:name="com.google.android.googleapps.permission.GOOGLE_AUTH"
+        android:name="${basePackageName}.android.googleapps.permission.GOOGLE_AUTH"
         android:icon="@drawable/proprietary_auth_ic_scope_icon_default" />
 
     <permission
-        android:name="com.google.android.googleapps.permission.GOOGLE_AUTH.cp"
+        android:name="${basePackageName}.android.googleapps.permission.GOOGLE_AUTH.cp"
         android:description="@string/permission_service_cp_description"
         android:label="@string/permission_service_cp_label"
         android:protectionLevel="dangerous" />
     <permission
-        android:name="com.google.android.googleapps.permission.GOOGLE_AUTH.local"
+        android:name="${basePackageName}.android.googleapps.permission.GOOGLE_AUTH.local"
         android:description="@string/permission_service_local_description"
         android:label="@string/permission_service_local_label"
         android:protectionLevel="dangerous" />
     <permission
-        android:name="com.google.android.googleapps.permission.GOOGLE_AUTH.mail"
+        android:name="${basePackageName}.android.googleapps.permission.GOOGLE_AUTH.mail"
         android:description="@string/permission_service_mail_description"
         android:label="@string/permission_service_mail_label"
         android:protectionLevel="dangerous" />
     <permission
-        android:name="com.google.android.googleapps.permission.GOOGLE_AUTH.writely"
+        android:name="${basePackageName}.android.googleapps.permission.GOOGLE_AUTH.writely"
         android:description="@string/permission_service_writely_description"
         android:label="@string/permission_service_writely_label"
         android:protectionLevel="dangerous" />
 
     <permission
-        android:name="com.google.android.gms.permission.ACTIVITY_RECOGNITION"
+        android:name="${basePackageName}.android.gms.permission.ACTIVITY_RECOGNITION"
         android:label="@string/perm_activity_recognition_label"
         android:description="@string/perm_activity_recognition_description"
         android:protectionLevel="normal" />
 
     <permission
-        android:name="com.google.android.gms.permission.AD_ID"
+        android:name="${basePackageName}.android.gms.permission.AD_ID"
         android:label="@string/perm_ad_id_label"
         android:description="@string/perm_ad_id_description"
         android:protectionLevel="normal" />
     <permission
-        android:name="com.google.android.gms.permission.AD_ID_NOTIFICATION"
+        android:name="${basePackageName}.android.gms.permission.AD_ID_NOTIFICATION"
         android:label="@string/perm_ad_id_notification_label"
         android:description="@string/perm_ad_id_notification_description"
         android:protectionLevel="normal" />
 
 
     <permission
-        android:name="com.google.android.gms.auth.api.phone.permission.SEND"
+        android:name="${basePackageName}.android.gms.auth.api.phone.permission.SEND"
         android:protectionLevel="signature" />
 
     <permission
@@ -98,39 +98,39 @@
         android:protectionLevel="privileged|signature" />
 
     <permission
-        android:name="com.google.android.gms.permission.CAR_SPEED"
+        android:name="${basePackageName}.android.gms.permission.CAR_SPEED"
         android:label="@string/perm_car_speed_label"
         android:description="@string/perm_car_speed_description"
         android:permissionGroup="android.permission-group.LOCATION"
         android:protectionLevel="dangerous" />
 
     <permission-group
-        android:name="com.google.android.gms.permission.CAR_INFORMATION"
+        android:name="${basePackageName}.android.gms.permission.CAR_INFORMATION"
         android:label="@string/perm_car_info_label"
         android:description="@string/perm_car_info_description" />
     <permission
-        android:name="com.google.android.gms.permission.CAR_FUEL"
+        android:name="${basePackageName}.android.gms.permission.CAR_FUEL"
         android:label="@string/perm_car_fuel_label"
         android:description="@string/perm_car_fuel_description"
-        android:permissionGroup="com.google.android.gms.permission.CAR_INFORMATION"
+        android:permissionGroup="${basePackageName}.android.gms.permission.CAR_INFORMATION"
         android:protectionLevel="dangerous" />
     <permission
-        android:name="com.google.android.gms.permission.CAR_MILEAGE"
+        android:name="${basePackageName}.android.gms.permission.CAR_MILEAGE"
         android:label="@string/perm_car_mileage_label"
         android:description="@string/perm_car_mileage_description"
-        android:permissionGroup="com.google.android.gms.permission.CAR_INFORMATION"
+        android:permissionGroup="${basePackageName}.android.gms.permission.CAR_INFORMATION"
         android:protectionLevel="dangerous" />
     <permission
-        android:name="com.google.android.gms.permission.CAR_VENDOR_EXTENSION"
+        android:name="${basePackageName}.android.gms.permission.CAR_VENDOR_EXTENSION"
         android:label="@string/perm_car_vendor_extension_label"
         android:description="@string/perm_car_vendor_extension_description"
-        android:permissionGroup="com.google.android.gms.permission.CAR_INFORMATION"
+        android:permissionGroup="${basePackageName}.android.gms.permission.CAR_INFORMATION"
         android:protectionLevel="dangerous" />
 
     <permission
-        android:name="com.google.android.gms.auth.permission.GOOGLE_ACCOUNT_CHANGE"
+        android:name="${basePackageName}.android.gms.auth.permission.GOOGLE_ACCOUNT_CHANGE"
         android:protectionLevel="signature"/>
-    <uses-permission android:name="com.google.android.gms.auth.permission.GOOGLE_ACCOUNT_CHANGE" />
+    <uses-permission android:name="${basePackageName}.android.gms.auth.permission.GOOGLE_ACCOUNT_CHANGE" />
 
     <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
     <uses-permission android:name="android.permission.INTERNET" />
@@ -153,12 +153,12 @@
     <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
     <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
 
-    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
-    <uses-permission android:name="com.google.android.c2dm.permission.SEND" />
-    <uses-permission android:name="com.google.android.gtalkservice.permission.GTALK_SERVICE" />
-    <uses-permission android:name="com.google.android.gms.auth.api.phone.permission.SEND" />
+    <uses-permission android:name="${basePackageName}.android.c2dm.permission.RECEIVE" />
+    <uses-permission android:name="${basePackageName}.android.c2dm.permission.SEND" />
+    <uses-permission android:name="${basePackageName}.android.gtalkservice.permission.GTALK_SERVICE" />
+    <uses-permission android:name="${basePackageName}.android.gms.auth.api.phone.permission.SEND" />
 
-    <uses-permission android:name="org.microg.gms.STATUS_BROADCAST" />
+    <uses-permission android:name="${basePackageName}.microg.gms.STATUS_BROADCAST" />
 
     <uses-permission android:name="android.permission.REQUEST_IGNORE_BATTERY_OPTIMIZATIONS" />
     <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
@@ -201,14 +201,14 @@
         android:networkSecurityConfig="@xml/network_security_config"
         android:theme="@style/Theme.App">
 
-        <library android:name="com.google.android.gms" />
+        <library android:name="${basePackageName}.android.gms" />
 
         <!-- Provision -->
 
         <service
             android:name="org.microg.gms.provision.ProvisionService"
             android:exported="true"
-            android:permission="org.microg.gms.PROVISION" />
+            android:permission="${basePackageName}.microg.gms.PROVISION" />
 
         <!-- Location -->
 
@@ -219,7 +219,7 @@
             android:process=":ui"
             android:theme="@style/Theme.AppCompat.DayNight.NoActionBar">
             <intent-filter>
-                <action android:name="com.google.android.gms.location.places.ui.PICK_PLACE" />
+                <action android:name="${basePackageName}.android.gms.location.places.ui.PICK_PLACE" />
 
                 <category android:name="android.intent.category.DEFAULT" />
             </intent-filter>
@@ -227,20 +227,20 @@
 
         <service android:name="org.microg.gms.places.GeoDataService">
             <intent-filter>
-                <action android:name="com.google.android.gms.location.places.GeoDataApi" />
-                <action android:name="com.google.android.gms.location.places.PlacesApi" />
+                <action android:name="${basePackageName}.android.gms.location.places.GeoDataApi" />
+                <action android:name="${basePackageName}.android.gms.location.places.PlacesApi" />
             </intent-filter>
         </service>
 
         <service android:name="org.microg.gms.places.PlaceDetectionService">
             <intent-filter>
-                <action android:name="com.google.android.gms.location.places.PlaceDetectionApi" />
+                <action android:name="${basePackageName}.android.gms.location.places.PlaceDetectionApi" />
             </intent-filter>
         </service>
 
         <service android:name="org.microg.gms.wearable.location.WearableLocationService">
             <intent-filter>
-                <action android:name="com.google.android.gms.wearable.MESSAGE_RECEIVED" />
+                <action android:name="${basePackageName}.android.gms.wearable.MESSAGE_RECEIVED" />
                 <data
                     android:host="*"
                     android:pathPrefix="/com/google/android/location/fused/wearable"
@@ -252,25 +252,18 @@
 
         <provider
             android:name="org.microg.gms.gservices.GServicesProvider"
-            android:authorities="com.google.android.gsf.gservices"
+            android:authorities="${basePackageName}.android.gsf.gservices"
             android:exported="true" />
         <provider
             android:name="org.microg.gms.settings.GoogleSettingsProvider"
-            android:authorities="com.google.settings"
+            android:authorities="${basePackageName}.settings"
             android:exported="true" />
-        <provider
-            android:name="org.microg.gms.feeds.SubscribedFeedsProvider"
-            android:authorities="subscribedfeeds"
-            android:exported="true"
-            android:multiprocess="false"
-            android:readPermission="android.permission.SUBSCRIBED_FEEDS_READ"
-            android:writePermission="android.permission.SUBSCRIBED_FEEDS_WRITE" />
 
         <!-- Device Checkin -->
 
         <service android:name="org.microg.gms.checkin.CheckinService">
             <intent-filter>
-                <action android:name="com.google.android.gms.checkin.BIND_TO_SERVICE" />
+                <action android:name="${basePackageName}.android.gms.checkin.BIND_TO_SERVICE" />
             </intent-filter>
         </service>
 
@@ -285,7 +278,7 @@
                 <action android:name="android.intent.action.PACKAGE_RESTARTED" />
             </intent-filter>
             <intent-filter>
-                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
+                <action android:name="${basePackageName}.android.c2dm.intent.RECEIVE" />
 
                 <category android:name="android.server.checkin.CHECKIN" />
             </intent-filter>
@@ -303,8 +296,8 @@
             android:name="org.microg.gms.gcm.PushRegisterService"
             android:process=":persistent">
             <intent-filter>
-                <action android:name="com.google.android.c2dm.intent.REGISTER" />
-                <action android:name="com.google.android.c2dm.intent.UNREGISTER" />
+                <action android:name="${basePackageName}.android.c2dm.intent.REGISTER" />
+                <action android:name="${basePackageName}.android.c2dm.intent.UNREGISTER" />
 
                 <category android:name="android.intent.category.DEFAULT" />
             </intent-filter>
@@ -314,7 +307,7 @@
             android:name="org.microg.gms.gcm.PushRegisterReceiver"
             android:process=":persistent">
             <intent-filter>
-                <action android:name="com.google.iid.TOKEN_REQUEST" />
+                <action android:name="${basePackageName}.iid.TOKEN_REQUEST" />
             </intent-filter>
         </receiver>
 
@@ -326,7 +319,7 @@
             android:name="org.microg.gms.gcm.SendReceiver"
             android:process=":persistent">
             <intent-filter>
-                <action android:name="com.google.android.gcm.intent.SEND" />
+                <action android:name="${basePackageName}.android.gcm.intent.SEND" />
             </intent-filter>
         </receiver>
 
@@ -373,7 +366,7 @@
 
         <service android:name="org.microg.gms.car.CarService">
             <intent-filter>
-                <action android:name="com.google.android.gms.car.service.START" />
+                <action android:name="${basePackageName}.android.gms.car.service.START" />
 
                 <category android:name="android.intent.category.DEFAULT" />
             </intent-filter>
@@ -383,7 +376,7 @@
 
         <service android:name="org.microg.gms.people.PeopleService">
             <intent-filter>
-                <action android:name="com.google.android.gms.people.service.START" />
+                <action android:name="${basePackageName}.android.gms.people.service.START" />
 
                 <category android:name="android.intent.category.DEFAULT" />
             </intent-filter>
@@ -404,7 +397,7 @@
 
         <service android:name="org.microg.gms.wearable.WearableService">
             <intent-filter>
-                <action android:name="com.google.android.gms.wearable.BIND" />
+                <action android:name="${basePackageName}.android.gms.wearable.BIND" />
             </intent-filter>
         </service>
 
@@ -415,7 +408,7 @@
                 <action android:name="android.accounts.AccountAuthenticator" />
             </intent-filter>
             <intent-filter>
-                <action android:name="com.google.android.gsf.action.GET_GLS" />
+                <action android:name="${basePackageName}.android.gsf.action.GET_GLS" />
             </intent-filter>
 
             <meta-data
@@ -433,8 +426,8 @@
             android:process=":ui"
             android:theme="@style/Theme.App.DayNight.Dialog.Alert.NoActionBar">
             <intent-filter>
-                <action android:name="com.google.android.gms.common.account.CHOOSE_ACCOUNT" />
-                <action android:name="com.google.android.gms.common.account.CHOOSE_ACCOUNT_USERTILE"/>
+                <action android:name="${basePackageName}.android.gms.common.account.CHOOSE_ACCOUNT" />
+                <action android:name="${basePackageName}.android.gms.common.account.CHOOSE_ACCOUNT_USERTILE"/>
 
                 <category android:name="android.intent.category.DEFAULT" />
             </intent-filter>
@@ -448,7 +441,7 @@
             android:launchMode="singleTask"
             android:theme="@style/Theme.LoginBlue">
             <intent-filter>
-                <action android:name="com.google.android.gms.auth.login.LOGIN" />
+                <action android:name="${basePackageName}.android.gms.auth.login.LOGIN" />
 
                 <category android:name="android.intent.category.DEFAULT" />
             </intent-filter>
@@ -479,39 +472,39 @@
 
         <provider
             android:name="org.microg.gms.auth.AccountContentProvider"
-            android:authorities="com.google.android.gms.auth.accounts"
+            android:authorities="${basePackageName}.android.gms.auth.accounts"
             android:exported="true" />
 
         <activity
             android:name="org.microg.gms.auth.credentials.CredentialPickerActivity"
             android:process=":ui">
             <intent-filter>
-                <action android:name="com.google.android.gms.auth.api.credentials.PICKER" />
+                <action android:name="${basePackageName}.android.gms.auth.api.credentials.PICKER" />
                 <category android:name="android.intent.category.DEFAULT" />
             </intent-filter>
         </activity>
 
         <service android:name="org.microg.gms.auth.credentials.CredentialsService">
             <intent-filter>
-                <action android:name="com.google.android.gms.auth.api.credentials.service.START" />
+                <action android:name="${basePackageName}.android.gms.auth.api.credentials.service.START" />
             </intent-filter>
         </service>
 
         <service android:name="org.microg.gms.auth.proxy.AuthProxyService">
             <intent-filter>
-                <action android:name="com.google.android.gms.auth.service.START" />
+                <action android:name="${basePackageName}.android.gms.auth.service.START" />
             </intent-filter>
         </service>
 
         <service android:name="org.microg.gms.auth.appcert.AppCertService">
             <intent-filter>
-                <action android:name="com.google.android.gms.auth.be.appcert.AppCertService" />
+                <action android:name="${basePackageName}.android.gms.auth.be.appcert.AppCertService" />
             </intent-filter>
         </service>
 
         <service android:name="org.microg.gms.credential.CredentialManagerService">
             <intent-filter>
-                <action android:name="com.google.android.gms.credential.manager.service.firstparty.START" />
+                <action android:name="${basePackageName}.android.gms.credential.manager.service.firstparty.START" />
             </intent-filter>
         </service>
 
@@ -522,21 +515,21 @@
             android:configChanges="keyboardHidden|keyboard|orientation|screenSize"
             android:exported="true">
             <intent-filter>
-                <action android:name="com.google.android.gms.auth.GOOGLE_SIGN_IN" />
+                <action android:name="${basePackageName}.android.gms.auth.GOOGLE_SIGN_IN" />
                 <category android:name="android.intent.category.DEFAULT" />
             </intent-filter>
         </activity>
 
         <service android:name="org.microg.gms.signin.SignInService">
             <intent-filter>
-                <action android:name="com.google.android.gms.signin.service.START" />
+                <action android:name="${basePackageName}.android.gms.signin.service.START" />
                 <category android:name="android.intent.category.DEFAULT" />
             </intent-filter>
         </service>
 
         <service android:name="org.microg.gms.auth.signin.AuthSignInService">
             <intent-filter>
-                <action android:name="com.google.android.gms.auth.api.signin.service.START" />
+                <action android:name="${basePackageName}.android.gms.auth.api.signin.service.START" />
                 <category android:name="android.intent.category.DEFAULT" />
             </intent-filter>
         </service>
@@ -547,7 +540,7 @@
 
         <service android:name="org.microg.gms.auth.credentials.identity.IdentitySignInService">
             <intent-filter>
-                <action android:name="com.google.android.gms.auth.api.identity.service.signin.START" />
+                <action android:name="${basePackageName}.android.gms.auth.api.identity.service.signin.START" />
             </intent-filter>
         </service>
 
@@ -568,7 +561,7 @@
             android:launchMode="singleTask"
             android:excludeFromRecents="false">
             <intent-filter>
-                <action android:name="com.google.android.gms.auth.api.credentials.ASSISTED_SIGNIN"/>
+                <action android:name="${basePackageName}.android.gms.auth.api.credentials.ASSISTED_SIGNIN"/>
                 <category android:name="android.intent.category.DEFAULT"/>
             </intent-filter>
         </activity>
@@ -597,10 +590,10 @@
             android:launchMode="singleTask"
             android:theme="@style/Theme.AppCompat.Dialog.Alert">
             <intent-filter>
-                <action android:name="com.google.android.gms.games.SHOW_SELECT_SNAPSHOT"/>
-                <action android:name="com.google.android.gms.games.VIEW_ACHIEVEMENTS" />
-                <action android:name="com.google.android.gms.games.VIEW_LEADERBOARDS" />
-                <action android:name="com.google.android.gms.games.VIEW_LEADERBOARD_SCORES" />
+                <action android:name="${basePackageName}.android.gms.games.SHOW_SELECT_SNAPSHOT"/>
+                <action android:name="${basePackageName}.android.gms.games.VIEW_ACHIEVEMENTS" />
+                <action android:name="${basePackageName}.android.gms.games.VIEW_LEADERBOARDS" />
+                <action android:name="${basePackageName}.android.gms.games.VIEW_LEADERBOARD_SCORES" />
                 <category android:name="android.intent.category.DEFAULT" />
             </intent-filter>
         </activity>
@@ -618,7 +611,7 @@
             android:process=":ui"
             android:theme="@style/Theme.AppCompat.DayNight.Dialog">
             <intent-filter>
-                <action android:name="com.google.android.gms.games.PLAY_GAMES_UPGRADE" />
+                <action android:name="${basePackageName}.android.gms.games.PLAY_GAMES_UPGRADE" />
                 <category android:name="android.intent.category.DEFAULT" />
             </intent-filter>
         </activity>
@@ -627,7 +620,7 @@
             android:name="org.microg.gms.games.GamesService"
             android:exported="true">
             <intent-filter>
-                <action android:name="com.google.android.gms.games.service.START" />
+                <action android:name="${basePackageName}.android.gms.games.service.START" />
                 <category android:name="android.intent.category.DEFAULT" />
             </intent-filter>
         </service>
@@ -636,7 +629,7 @@
             android:name="org.microg.gms.games.GamesConnectService"
             android:exported="true">
             <intent-filter>
-                <action android:name="com.google.android.gms.games.internal.connect.service.START" />
+                <action android:name="${basePackageName}.android.gms.games.internal.connect.service.START" />
                 <category android:name="android.intent.category.DEFAULT" />
             </intent-filter>
         </service>
@@ -648,13 +641,13 @@
         <!-- Chimera -->
         <provider
             android:name="org.microg.gms.chimera.ServiceProvider"
-            android:authorities="com.google.android.gms.chimera"
+            android:authorities="${basePackageName}.android.gms.chimera"
             android:exported="true" />
 
         <!-- Fonts -->
         <provider
             android:name="org.microg.gms.fonts.FontsProvider"
-            android:authorities="com.google.android.gms.fonts"
+            android:authorities="${basePackageName}.android.gms.fonts"
             android:exported="true" />
 
         <!-- microG Settings activity -->
@@ -678,7 +671,7 @@
             </intent-filter>
             <intent-filter>
                 <action android:name="android.intent.action.APPLICATION_PREFERENCES" />
-                <action android:name="com.google.android.gms.settings.EXPOSURE_NOTIFICATION_SETTINGS" />
+                <action android:name="${basePackageName}.android.gms.settings.EXPOSURE_NOTIFICATION_SETTINGS" />
                 <action android:name="org.microg.gms.settings.CHECKIN_SETTINGS" />
                 <action android:name="org.microg.gms.settings.GCM_SETTINGS" />
                 <action android:name="org.microg.gms.settings.MICROG_APP_GCM_SETTINGS" />
@@ -736,7 +729,7 @@
 
         <!-- microG Settings activity-alias for Google settings compatibility -->
         <activity-alias
-            android:name="com.google.android.gms.app.settings.GoogleSettingsLink"
+            android:name="${basePackageName}.android.gms.app.settings.GoogleSettingsLink"
             android:process=":ui"
             android:exported="true"
             android:targetActivity="org.microg.gms.ui.MainSettingsActivity"
@@ -768,10 +761,10 @@
             android:taskAffinity="org.microg.gms.settings"
             android:theme="@style/Theme.AppCompat.Light.NoActionBar">
             <intent-filter>
-                <action android:name="com.google.android.gms.accountsettings.MY_ACCOUNT" />
-                <action android:name="com.google.android.gms.accountsettings.ACCOUNT_PREFERENCES_SETTINGS" />
-                <action android:name="com.google.android.gms.accountsettings.PRIVACY_SETTINGS" />
-                <action android:name="com.google.android.gms.accountsettings.SECURITY_SETTINGS" />
+                <action android:name="${basePackageName}.android.gms.accountsettings.MY_ACCOUNT" />
+                <action android:name="${basePackageName}.android.gms.accountsettings.ACCOUNT_PREFERENCES_SETTINGS" />
+                <action android:name="${basePackageName}.android.gms.accountsettings.PRIVACY_SETTINGS" />
+                <action android:name="${basePackageName}.android.gms.accountsettings.SECURITY_SETTINGS" />
 
                 <category android:name="android.intent.category.DEFAULT" />
             </intent-filter>
@@ -784,17 +777,17 @@
             android:excludeFromRecents="true"
             android:theme="@style/Theme.App.DayNight.Dialog.Alert.NoActionBar">
             <intent-filter>
-                <action android:name="com.google.android.gms.accountsettings.action.VIEW_SETTINGS" />
+                <action android:name="${basePackageName}.android.gms.accountsettings.action.VIEW_SETTINGS" />
                 <category android:name="android.intent.category.DEFAULT" />
             </intent-filter>
             <intent-filter>
-                <action android:name="com.google.android.gms.accountsettings.action.BROWSE_SETTINGS" />
+                <action android:name="${basePackageName}.android.gms.accountsettings.action.BROWSE_SETTINGS" />
 
                 <category android:name="android.intent.category.DEFAULT" />
                 <category android:name="android.intent.category.BROWSABLE" />
             </intent-filter>
             <intent-filter>
-                <action android:name="com.google.android.gms.location.settings.LOCATION_SHARING"/>
+                <action android:name="${basePackageName}.android.gms.location.settings.LOCATION_SHARING"/>
                 <category android:name="android.intent.category.DEFAULT"/>
             </intent-filter>
         </activity>
@@ -804,9 +797,9 @@
             android:process=":ui"
             android:taskAffinity="org.microg.gms.settings">
             <intent-filter>
-                <action android:name="com.google.android.gms.location.settings.LOCATION_HISTORY" />
-                <action android:name="com.google.android.location.settings.LOCATION_REPORTING_SETTINGS" />
-                <action android:name="com.google.android.gms.location.settings.LOCATION_REPORTING_SETTINGS" />
+                <action android:name="${basePackageName}.android.gms.location.settings.LOCATION_HISTORY" />
+                <action android:name="${basePackageName}.android.location.settings.LOCATION_REPORTING_SETTINGS" />
+                <action android:name="${basePackageName}.android.gms.location.settings.LOCATION_REPORTING_SETTINGS" />
 
                 <category android:name="android.intent.category.DEFAULT" />
             </intent-filter>
@@ -816,12 +809,12 @@
 
         <provider
             android:name="org.microg.gms.phenotype.ConfigurationProvider"
-            android:authorities="com.google.android.gms.phenotype"
+            android:authorities="${basePackageName}.android.gms.phenotype"
             android:exported="true" />
 
         <service android:name="org.microg.gms.phenotype.PhenotypeService">
             <intent-filter>
-                <action android:name="com.google.android.gms.phenotype.service.START" />
+                <action android:name="${basePackageName}.android.gms.phenotype.service.START" />
             </intent-filter>
         </service>
 
@@ -831,7 +824,7 @@
             android:name="org.microg.gms.googlehelp.GoogleHelpService"
             android:exported="true">
             <intent-filter>
-                <action android:name="com.google.android.gms.googlehelp.service.GoogleHelpService.START" />
+                <action android:name="${basePackageName}.android.gms.googlehelp.service.GoogleHelpService.START" />
                 <category android:name="android.intent.category.DEFAULT" />
             </intent-filter>
         </service>
@@ -841,7 +834,7 @@
             android:theme="@style/Theme.App.Translucent"
             android:exported="true">
             <intent-filter>
-                <action android:name="com.google.android.gms.googlehelp.HELP" />
+                <action android:name="${basePackageName}.android.gms.googlehelp.HELP" />
                 <category android:name="android.intent.category.DEFAULT" />
             </intent-filter>
 
@@ -854,7 +847,7 @@
 
         <service android:name="org.microg.gms.potokens.PoTokensService">
             <intent-filter>
-                <action android:name="com.google.android.gms.potokens.service.START" />
+                <action android:name="${basePackageName}.android.gms.potokens.service.START" />
             </intent-filter>
         </service>
 
@@ -865,7 +858,7 @@
             android:theme="@android:style/Theme.Translucent.NoTitleBar"
             android:exported="true">
             <intent-filter>
-                <action android:name="com.google.android.gms.backup.ACTION_BACKUP_SETTINGS"/>
+                <action android:name="${basePackageName}.android.gms.backup.ACTION_BACKUP_SETTINGS"/>
                 <category android:name="android.intent.category.DEFAULT"/>
             </intent-filter>
         </activity>
@@ -876,7 +869,7 @@
             android:name="org.microg.gms.measurement.MeasurementService"
             android:exported="true">
             <intent-filter>
-                <action android:name="com.google.android.gms.measurement.START" />
+                <action android:name="${basePackageName}.android.gms.measurement.START" />
 
                 <category android:name="android.intent.category.DEFAULT" />
             </intent-filter>
@@ -885,38 +878,38 @@
             android:name="org.microg.gms.languageprofile.LanguageProfileService"
             android:exported="true">
             <intent-filter>
-                <action android:name="com.google.android.gms.languageprofile.service.START" />
+                <action android:name="${basePackageName}.android.gms.languageprofile.service.START" />
 
                 <category android:name="android.intent.category.DEFAULT" />
             </intent-filter>
         </service>
         <service android:name="org.microg.gms.mdm.NetworkQualityService">
             <intent-filter>
-                <action android:name="com.google.android.gms.mdm.services.START" />
+                <action android:name="${basePackageName}.android.gms.mdm.services.START" />
 
                 <category android:name="android.intent.category.DEFAULT" />
             </intent-filter>
         </service>
         <service android:name="org.microg.gms.icing.LightweightIndexService">
             <intent-filter>
-                <action android:name="com.google.android.gms.icing.LIGHTWEIGHT_INDEX_SERVICE" />
+                <action android:name="${basePackageName}.android.gms.icing.LIGHTWEIGHT_INDEX_SERVICE" />
             </intent-filter>
         </service>
         <service android:name="org.microg.gms.icing.IndexService">
             <intent-filter>
-                <action android:name="com.google.android.gms.icing.INDEX_SERVICE" />
+                <action android:name="${basePackageName}.android.gms.icing.INDEX_SERVICE" />
             </intent-filter>
         </service>
         <service
             android:name=".analytics.service.AnalyticsService"
             android:exported="true">
             <intent-filter>
-                <action android:name="com.google.android.gms.analytics.service.START" />
+                <action android:name="${basePackageName}.android.gms.analytics.service.START" />
             </intent-filter>
         </service>
         <service android:name="org.microg.gms.playlog.PlayLogService">
             <intent-filter>
-                <action android:name="com.google.android.gms.playlog.service.START" />
+                <action android:name="${basePackageName}.android.gms.playlog.service.START" />
             </intent-filter>
         </service>
         <service
@@ -925,7 +918,7 @@
 
         <service android:name="org.microg.gms.ads.GService">
             <intent-filter>
-                <action android:name="com.google.android.gms.ads.gservice.START" />
+                <action android:name="${basePackageName}.android.gms.ads.gservice.START" />
             </intent-filter>
         </service>
 
@@ -933,18 +926,18 @@
 
         <service android:name="org.microg.gms.feedback.FeedbackService">
             <intent-filter>
-                <action android:name="com.google.android.gms.feedback.internal.IFeedbackService" />
+                <action android:name="${basePackageName}.android.gms.feedback.internal.IFeedbackService" />
             </intent-filter>
         </service>
 
         <activity
-            android:name="com.google.android.gms.feedback.FeedbackActivity"
+            android:name="${basePackageName}.android.gms.feedback.FeedbackActivity"
             android:exported="true"
             android:excludeFromRecents="true"
             android:theme="@style/Theme.App.Translucent"/>
 
         <activity
-            android:name="com.google.android.gms.credential.manager.PasswordManagerActivity"
+            android:name="${basePackageName}.android.gms.credential.manager.PasswordManagerActivity"
             android:exported="true"
             android:process=":ui"
             android:excludeFromRecents="true"
@@ -952,83 +945,83 @@
 
         <service android:name="org.microg.gms.clearcut.ClearcutLoggerService">
             <intent-filter>
-                <action android:name="com.google.android.gms.clearcut.service.START" />
+                <action android:name="${basePackageName}.android.gms.clearcut.service.START" />
                 <category android:name="android.intent.category.DEFAULT" />
             </intent-filter>
         </service>
         <service android:name="org.microg.gms.drive.api.DriveApiService">
             <intent-filter>
-                <action android:name="com.google.android.gms.drive.ApiService.START" />
-                <action android:name="com.google.android.gms.drive.ApiService.STOP" />
-                <action android:name="com.google.android.gms.drive.ApiService.RESET_AFTER_BOOT" />
+                <action android:name="${basePackageName}.android.gms.drive.ApiService.START" />
+                <action android:name="${basePackageName}.android.gms.drive.ApiService.STOP" />
+                <action android:name="${basePackageName}.android.gms.drive.ApiService.RESET_AFTER_BOOT" />
 
                 <category android:name="android.intent.category.DEFAULT" />
             </intent-filter>
         </service>
         <service android:name="org.microg.gms.reminders.RemindersService">
             <intent-filter>
-                <action android:name="com.google.android.gms.reminders.service.START" />
+                <action android:name="${basePackageName}.android.gms.reminders.service.START" />
                 <category android:name="android.intent.category.DEFAULT" />
             </intent-filter>
         </service>
 
         <service android:name="org.microg.gms.wallet.PaymentService">
             <intent-filter>
-                <action android:name="com.google.android.gms.wallet.service.BIND" />
+                <action android:name="${basePackageName}.android.gms.wallet.service.BIND" />
             </intent-filter>
         </service>
 
         <service android:name="org.microg.gms.firebase.dynamiclinks.DynamicLinksService">
             <intent-filter>
-                <action android:name="com.google.firebase.dynamiclinks.service.START" />
+                <action android:name="${basePackageName}.firebase.dynamiclinks.service.START" />
             </intent-filter>
         </service>
 
         <service android:name="org.microg.gms.udc.FacsCacheService">
             <intent-filter>
-                <action android:name="com.google.android.gms.facs.cache.service.START" />
+                <action android:name="${basePackageName}.android.gms.facs.cache.service.START" />
             </intent-filter>
         </service>
 
         <service android:name="org.microg.gms.usagereporting.UsageReportingService">
             <intent-filter>
-                <action android:name="com.google.android.gms.usagereporting.service.START" />
+                <action android:name="${basePackageName}.android.gms.usagereporting.service.START" />
             </intent-filter>
         </service>
 
         <service android:name="org.microg.gms.pseudonymous.PseudonymousIdService" >
             <intent-filter>
-                <action android:name="com.google.android.gms.pseudonymous.service.START" />
+                <action android:name="${basePackageName}.android.gms.pseudonymous.service.START" />
             </intent-filter>
         </service>
 
         <service android:name="org.microg.gms.gass.GassService">
             <intent-filter>
-                <action android:name="com.google.android.gms.gass.START" />
+                <action android:name="${basePackageName}.android.gms.gass.START" />
             </intent-filter>
         </service>
 
         <service android:name="org.microg.gms.auth.account.data.AccountDataService">
             <intent-filter>
-                <action android:name="com.google.android.gms.auth.account.data.service.START" />
+                <action android:name="${basePackageName}.android.gms.auth.account.data.service.START" />
             </intent-filter>
         </service>
 
         <service android:name=".semanticlocation.SemanticLocationService" android:exported="true">
             <intent-filter>
-                <action android:name="com.google.android.gms.semanticlocation.service.START_ODLH" />
+                <action android:name="${basePackageName}.android.gms.semanticlocation.service.START_ODLH" />
             </intent-filter>
         </service>
 
         <service android:name="org.microg.gms.audit.AuditService">
             <intent-filter>
-                <action android:name="com.google.android.gms.audit.service.START" />
+                <action android:name="${basePackageName}.android.gms.audit.service.START" />
             </intent-filter>
         </service>
 
         <service android:name="org.microg.gms.common.ClientTelemetryService">
             <intent-filter>
-                <action android:name="com.google.android.gms.common.telemetry.service.START" />
+                <action android:name="${basePackageName}.android.gms.common.telemetry.service.START" />
             </intent-filter>
         </service>
 
@@ -1039,7 +1032,7 @@
             android:excludeFromRecents="true"
             android:theme="@style/Theme.AppCompat.DayNight.NoActionBar">
             <intent-filter>
-                <action android:name="com.google.android.gms.mlkit.ACTION_SCAN_BARCODE" />
+                <action android:name="${basePackageName}.android.gms.mlkit.ACTION_SCAN_BARCODE" />
 
                 <category android:name="android.intent.category.DEFAULT" />
             </intent-filter>
@@ -1047,149 +1040,149 @@
 
         <service android:name="org.microg.gms.DummyService">
             <intent-filter>
-                <action android:name="com.google.android.contextmanager.service.ContextManagerService.START" />
-                <action android:name="com.google.android.gms.accounts.ACCOUNT_SERVICE" />
-                <action android:name="com.google.android.gms.ads.identifier.service.EVENT_ATTESTATION" />
-                <action android:name="com.google.android.gms.ads.service.CACHE" />
-                <action android:name="com.google.android.gms.ads.service.CONSENT_LOOKUP" />
-                <action android:name="com.google.android.gms.ads.service.HTTP" />
-                <action android:name="com.google.android.gms.appstate.service.START" />
-                <action android:name="com.google.android.gms.appusage.service.START" />
-                <action android:name="com.google.android.gms.asterism.service.START" />
-                <action android:name="com.google.android.gms.audiomodem.service.AudioModemService.START" />
-                <action android:name="com.google.android.gms.auth.account.authapi.START" />
-                <action android:name="com.google.android.gms.auth.account.authenticator.auto.service.START" />
-                <action android:name="com.google.android.gms.auth.account.authenticator.chromeos.START" />
-                <action android:name="com.google.android.gms.auth.account.authenticator.tv.service.START" />
-                <action android:name="com.google.android.gms.auth.api.identity.service.authorization.START" />
-                <action android:name="com.google.android.gms.auth.api.identity.service.credentialsaving.START" />
-                <action android:name="com.google.android.gms.auth.api.phone.service.InternalService.START" />
-                <action android:name="com.google.android.gms.auth.api.signin.service.START" />
-                <action android:name="com.google.android.gms.auth.blockstore.service.START"/>
-                <action android:name="com.google.android.gms.auth.config.service.START" />
-                <action android:name="com.google.android.gms.auth.cryptauth.cryptauthservice.START" />
-                <action android:name="com.google.android.gms.auth.proximity.devicesyncservice.START" />
-                <action android:name="com.google.android.gms.auth.proximity.securechannelservice.START" />
-                <action android:name="com.google.android.gms.auth.proximity.START" />
-                <action android:name="com.google.android.gms.auth.service.START" />
-                <action android:name="com.google.android.gms.backup.G1_BACKUP" />
-                <action android:name="com.google.android.gms.backup.G1_RESTORE" />
-                <action android:name="com.google.android.gms.backup.GMS_MODULE_RESTORE" />
-                <action android:name="com.google.android.gms.beacon.internal.IBleService.START" />
-                <action android:name="com.google.android.gms.carrierauth.service.START" />
-                <action android:name="com.google.android.gms.cast.firstparty.START" />
-                <action android:name="com.google.android.gms.cast_mirroring.service.START" />
-                <action android:name="com.google.android.gms.cast.remote_display.service.START" />
-                <action android:name="com.google.android.gms.chromesync.service.START" />
-                <action android:name="com.google.android.gms.common.download.START" />
-                <action android:name="com.google.android.gms.common.service.START" />
-                <action android:name="com.google.android.gms.config.START" />
-                <action android:name="com.google.android.gms.constellation.service.START" />
-                <action android:name="com.google.android.gms.deviceconnection.service.START" />
-                <action android:name="com.google.android.gms.enterprise.loader.service.START" />
-                <action android:name="com.google.android.gms.facs.internal.service.START" />
-                <action android:name="com.google.android.gms.fido.credentialstore.internal_service.START" />
-                <action android:name="com.google.android.gms.fido.fido2.regular.START" />
-                <action android:name="com.google.android.gms.fido.fido2.zeroparty.START" />
-                <action android:name="com.google.android.gms.fido.sourcedevice.service.START" />
-                <action android:name="com.google.android.gms.fido.targetdevice.internal_service.START" />
-                <action android:name="com.google.android.gms.fido.u2f.privileged.START" />
-                <action android:name="com.google.android.gms.fido.u2f.thirdparty.START" />
-                <action android:name="com.google.android.gms.fido.u2f.zeroparty.START" />
-                <action android:name="com.google.android.gms.fitness.BleApi" />
-                <action android:name="com.google.android.gms.fitness.GoalsApi" />
-                <action android:name="com.google.android.gms.fitness.GoogleFitnessService.START" />
-                <action android:name="com.google.android.gms.fitness.InternalApi" />
-                <action android:name="com.google.android.gms.fitness.RecordingApi" />
-                <action android:name="com.google.android.gms.fitness.SensorsApi" />
-                <action android:name="com.google.android.gms.fonts.service.START" />
-                <action android:name="com.google.android.gms.freighter.service.START" />
-                <action android:name="com.google.android.gms.growth.service.START" />
-                <action android:name="com.google.android.gms.googlehelp.service.GoogleHelpService.START" />
-                <action android:name="com.google.android.gms.herrevad.services.LightweightNetworkQualityAndroidService.START" />
-                <action android:name="com.google.android.gms.identity.service.BIND" />
-                <action android:name="com.google.android.gms.inappreach.service.START"/>
-                <action android:name="com.google.android.gms.instantapps.START" />
-                <action android:name="com.google.android.gms.kids.service.START" />
-                <action android:name="com.google.android.gms.learning.internal.dynamitesupport.START" />
-                <action android:name="com.google.android.gms.learning.intservice.START" />
-                <action android:name="com.google.android.gms.learning.predictor.START" />
-                <action android:name="com.google.android.gms.learning.trainer.START" />
-                <action android:name="com.google.android.gms.learning.training.background.START" />
-                <action android:name="com.google.android.gms.locationsharing.api.START" />
-                <action android:name="com.google.android.gms.locationsharingreporter.service.START" />
-                <action android:name="com.google.android.gms.lockbox.service.START" />
-                <action android:name="com.google.android.gms.matchstick.lighter.service.START" />
-                <action android:name="com.google.android.gms.mdm.services.DeviceManagerApiService.START" />
-                <action android:name="com.google.android.gms.mdns.service.START" />
-                <action android:name="com.google.android.gms.nearby.bootstrap.service.NearbyBootstrapService.START" />
-                <action android:name="com.google.android.gms.nearby.connection.service.START" />
-                <action android:name="com.google.android.gms.nearby.fastpair.START" />
-                <action android:name="com.google.android.gms.nearby.messages.service.NearbyMessagesService.START" />
-                <action android:name="com.google.android.gms.nearby.sharing.service.NearbySharingService.START" />
-                <action android:name="com.google.android.gms.nearby.sharing.START_SERVICE" />
-                <action android:name="com.google.android.gms.notifications.service.START" />
-                <action android:name="com.google.android.gms.ocr.service.internal.START" />
-                <action android:name="com.google.android.gms.ocr.service.START" />
-                <action android:name="com.google.android.gms.payse.service.BIND" />
-                <action android:name="com.google.android.gms.people.contactssync.service.START" />
-                <action android:name="com.google.android.gms.photos.autobackup.service.START" />
-                <action android:name="com.google.android.gms.plus.service.default.INTENT" />
-                <action android:name="com.google.android.gms.plus.service.image.INTENT" />
-                <action android:name="com.google.android.gms.plus.service.internal.START" />
-                <action android:name="com.google.android.gms.plus.service.START" />
-                <action android:name="com.google.android.gms.rcs.START" />
-                <action android:name="com.google.android.gms.romanesco.MODULE_BACKUP_AGENT" />
-                <action android:name="com.google.android.gms.romanesco.service.START" />
-                <action android:name="com.google.android.gms.search.service.SEARCH_AUTH_START" />
-                <action android:name="com.google.android.gms.sesame.service.BIND" />
-                <action android:name="com.google.android.gms.telephonyspam.service.START" />
-                <action android:name="com.google.android.gms.testsupport.service.START" />
-                <action android:name="com.google.android.gms.scheduler.ACTION_PROXY_SCHEDULE" />
-                <action android:name="com.google.android.gms.setup.auth.SecondDeviceAuth.START" />
-                <action android:name="com.google.android.gms.smartdevice.d2d.SourceDeviceService.START" />
-                <action android:name="com.google.android.gms.smartdevice.d2d.TargetDeviceService.START" />
-                <action android:name="com.google.android.gms.smartdevice.directtransfer.SourceDirectTransferService.START" />
-                <action android:name="com.google.android.gms.smartdevice.directtransfer.TargetDirectTransferService.START" />
-                <action android:name="com.google.android.gms.smartdevice.postsetup.PostSetupService.START" />
-                <action android:name="com.google.android.gms.smartdevice.setup.accounts.AccountsService.START" />
-                <action android:name="com.google.android.gms.smartdevice.wifi.START_WIFI_HELPER_SERVICE" />
-                <action android:name="com.google.android.gms.social.location.activity.service.START" />
-                <action android:name="com.google.android.gms.statementservice.EXECUTE" />
-                <action android:name="com.google.android.gms.stats.ACTION_UPLOAD_DROPBOX_ENTRIES" />
-                <action android:name="com.google.android.gms.speech.service.START" />
-                <action android:name="com.google.android.gms.thunderbird.service.START" />
-                <action android:name="com.google.android.gms.trustagent.BridgeApi.START" />
-                <action android:name="com.google.android.gms.trustagent.StateApi.START" />
-                <action android:name="com.google.android.gms.trustagent.trustlet.trustletmanagerservice.BIND" />
-                <action android:name="com.google.android.gms.trustlet.bluetooth.service.BIND" />
-                <action android:name="com.google.android.gms.trustlet.connectionlessble.service.BIND" />
-                <action android:name="com.google.android.gms.trustlet.face.service.BIND" />
-                <action android:name="com.google.android.gms.trustlet.nfc.service.BIND" />
-                <action android:name="com.google.android.gms.trustlet.onbody.service.BIND" />
-                <action android:name="com.google.android.gms.trustlet.place.service.BIND" />
-                <action android:name="com.google.android.gms.trustlet.voiceunlock.service.BIND" />
-                <action android:name="com.google.android.gms.udc.service.START" />
-                <action android:name="com.google.android.gms.update.START_API_SERVICE" />
-                <action android:name="com.google.android.gms.update.START_SERVICE" />
-                <action android:name="com.google.android.gms.update.START_SINGLE_USER_API_SERVICE" />
-                <action android:name="com.google.android.gms.update.START_TV_API_SERVICE" />
-                <action android:name="com.google.android.gms.userlocation.service.START" />
-                <action android:name="com.google.android.gms.vehicle.cabin.service.START" />
-                <action android:name="com.google.android.gms.vehicle.climate.service.START" />
-                <action android:name="com.google.android.gms.vehicle.info.service.START" />
-                <action android:name="com.google.android.gms.walletp2p.service.firstparty.BIND" />
-                <action android:name="com.google.android.gms.walletp2p.service.zeroparty.BIND" />
-                <action android:name="com.google.android.gms.wearable.BIND" />
-                <action android:name="com.google.android.gms.wearable.DATA_CHANGED" />
-                <action android:name="com.google.android.gms.wearable.NODE_CHANGED" />
-                <action android:name="com.google.android.mdd.service.START" />
-                <action android:name="com.google.android.mdh.service.START" />
-                <action android:name="com.google.android.mdh.service.listener.START" />
-                <action android:name="com.google.android.mobstore.service.START" />
+                <action android:name="${basePackageName}.android.contextmanager.service.ContextManagerService.START" />
+                <action android:name="${basePackageName}.android.gms.accounts.ACCOUNT_SERVICE" />
+                <action android:name="${basePackageName}.android.gms.ads.identifier.service.EVENT_ATTESTATION" />
+                <action android:name="${basePackageName}.android.gms.ads.service.CACHE" />
+                <action android:name="${basePackageName}.android.gms.ads.service.CONSENT_LOOKUP" />
+                <action android:name="${basePackageName}.android.gms.ads.service.HTTP" />
+                <action android:name="${basePackageName}.android.gms.appstate.service.START" />
+                <action android:name="${basePackageName}.android.gms.appusage.service.START" />
+                <action android:name="${basePackageName}.android.gms.asterism.service.START" />
+                <action android:name="${basePackageName}.android.gms.audiomodem.service.AudioModemService.START" />
+                <action android:name="${basePackageName}.android.gms.auth.account.authapi.START" />
+                <action android:name="${basePackageName}.android.gms.auth.account.authenticator.auto.service.START" />
+                <action android:name="${basePackageName}.android.gms.auth.account.authenticator.chromeos.START" />
+                <action android:name="${basePackageName}.android.gms.auth.account.authenticator.tv.service.START" />
+                <action android:name="${basePackageName}.android.gms.auth.api.identity.service.authorization.START" />
+                <action android:name="${basePackageName}.android.gms.auth.api.identity.service.credentialsaving.START" />
+                <action android:name="${basePackageName}.android.gms.auth.api.phone.service.InternalService.START" />
+                <action android:name="${basePackageName}.android.gms.auth.api.signin.service.START" />
+                <action android:name="${basePackageName}.android.gms.auth.blockstore.service.START"/>
+                <action android:name="${basePackageName}.android.gms.auth.config.service.START" />
+                <action android:name="${basePackageName}.android.gms.auth.cryptauth.cryptauthservice.START" />
+                <action android:name="${basePackageName}.android.gms.auth.proximity.devicesyncservice.START" />
+                <action android:name="${basePackageName}.android.gms.auth.proximity.securechannelservice.START" />
+                <action android:name="${basePackageName}.android.gms.auth.proximity.START" />
+                <action android:name="${basePackageName}.android.gms.auth.service.START" />
+                <action android:name="${basePackageName}.android.gms.backup.G1_BACKUP" />
+                <action android:name="${basePackageName}.android.gms.backup.G1_RESTORE" />
+                <action android:name="${basePackageName}.android.gms.backup.GMS_MODULE_RESTORE" />
+                <action android:name="${basePackageName}.android.gms.beacon.internal.IBleService.START" />
+                <action android:name="${basePackageName}.android.gms.carrierauth.service.START" />
+                <action android:name="${basePackageName}.android.gms.cast.firstparty.START" />
+                <action android:name="${basePackageName}.android.gms.cast_mirroring.service.START" />
+                <action android:name="${basePackageName}.android.gms.cast.remote_display.service.START" />
+                <action android:name="${basePackageName}.android.gms.chromesync.service.START" />
+                <action android:name="${basePackageName}.android.gms.common.download.START" />
+                <action android:name="${basePackageName}.android.gms.common.service.START" />
+                <action android:name="${basePackageName}.android.gms.config.START" />
+                <action android:name="${basePackageName}.android.gms.constellation.service.START" />
+                <action android:name="${basePackageName}.android.gms.deviceconnection.service.START" />
+                <action android:name="${basePackageName}.android.gms.enterprise.loader.service.START" />
+                <action android:name="${basePackageName}.android.gms.facs.internal.service.START" />
+                <action android:name="${basePackageName}.android.gms.fido.credentialstore.internal_service.START" />
+                <action android:name="${basePackageName}.android.gms.fido.fido2.regular.START" />
+                <action android:name="${basePackageName}.android.gms.fido.fido2.zeroparty.START" />
+                <action android:name="${basePackageName}.android.gms.fido.sourcedevice.service.START" />
+                <action android:name="${basePackageName}.android.gms.fido.targetdevice.internal_service.START" />
+                <action android:name="${basePackageName}.android.gms.fido.u2f.privileged.START" />
+                <action android:name="${basePackageName}.android.gms.fido.u2f.thirdparty.START" />
+                <action android:name="${basePackageName}.android.gms.fido.u2f.zeroparty.START" />
+                <action android:name="${basePackageName}.android.gms.fitness.BleApi" />
+                <action android:name="${basePackageName}.android.gms.fitness.GoalsApi" />
+                <action android:name="${basePackageName}.android.gms.fitness.GoogleFitnessService.START" />
+                <action android:name="${basePackageName}.android.gms.fitness.InternalApi" />
+                <action android:name="${basePackageName}.android.gms.fitness.RecordingApi" />
+                <action android:name="${basePackageName}.android.gms.fitness.SensorsApi" />
+                <action android:name="${basePackageName}.android.gms.fonts.service.START" />
+                <action android:name="${basePackageName}.android.gms.freighter.service.START" />
+                <action android:name="${basePackageName}.android.gms.growth.service.START" />
+                <action android:name="${basePackageName}.android.gms.googlehelp.service.GoogleHelpService.START" />
+                <action android:name="${basePackageName}.android.gms.herrevad.services.LightweightNetworkQualityAndroidService.START" />
+                <action android:name="${basePackageName}.android.gms.identity.service.BIND" />
+                <action android:name="${basePackageName}.android.gms.inappreach.service.START"/>
+                <action android:name="${basePackageName}.android.gms.instantapps.START" />
+                <action android:name="${basePackageName}.android.gms.kids.service.START" />
+                <action android:name="${basePackageName}.android.gms.learning.internal.dynamitesupport.START" />
+                <action android:name="${basePackageName}.android.gms.learning.intservice.START" />
+                <action android:name="${basePackageName}.android.gms.learning.predictor.START" />
+                <action android:name="${basePackageName}.android.gms.learning.trainer.START" />
+                <action android:name="${basePackageName}.android.gms.learning.training.background.START" />
+                <action android:name="${basePackageName}.android.gms.locationsharing.api.START" />
+                <action android:name="${basePackageName}.android.gms.locationsharingreporter.service.START" />
+                <action android:name="${basePackageName}.android.gms.lockbox.service.START" />
+                <action android:name="${basePackageName}.android.gms.matchstick.lighter.service.START" />
+                <action android:name="${basePackageName}.android.gms.mdm.services.DeviceManagerApiService.START" />
+                <action android:name="${basePackageName}.android.gms.mdns.service.START" />
+                <action android:name="${basePackageName}.android.gms.nearby.bootstrap.service.NearbyBootstrapService.START" />
+                <action android:name="${basePackageName}.android.gms.nearby.connection.service.START" />
+                <action android:name="${basePackageName}.android.gms.nearby.fastpair.START" />
+                <action android:name="${basePackageName}.android.gms.nearby.messages.service.NearbyMessagesService.START" />
+                <action android:name="${basePackageName}.android.gms.nearby.sharing.service.NearbySharingService.START" />
+                <action android:name="${basePackageName}.android.gms.nearby.sharing.START_SERVICE" />
+                <action android:name="${basePackageName}.android.gms.notifications.service.START" />
+                <action android:name="${basePackageName}.android.gms.ocr.service.internal.START" />
+                <action android:name="${basePackageName}.android.gms.ocr.service.START" />
+                <action android:name="${basePackageName}.android.gms.payse.service.BIND" />
+                <action android:name="${basePackageName}.android.gms.people.contactssync.service.START" />
+                <action android:name="${basePackageName}.android.gms.photos.autobackup.service.START" />
+                <action android:name="${basePackageName}.android.gms.plus.service.default.INTENT" />
+                <action android:name="${basePackageName}.android.gms.plus.service.image.INTENT" />
+                <action android:name="${basePackageName}.android.gms.plus.service.internal.START" />
+                <action android:name="${basePackageName}.android.gms.plus.service.START" />
+                <action android:name="${basePackageName}.android.gms.rcs.START" />
+                <action android:name="${basePackageName}.android.gms.romanesco.MODULE_BACKUP_AGENT" />
+                <action android:name="${basePackageName}.android.gms.romanesco.service.START" />
+                <action android:name="${basePackageName}.android.gms.search.service.SEARCH_AUTH_START" />
+                <action android:name="${basePackageName}.android.gms.sesame.service.BIND" />
+                <action android:name="${basePackageName}.android.gms.telephonyspam.service.START" />
+                <action android:name="${basePackageName}.android.gms.testsupport.service.START" />
+                <action android:name="${basePackageName}.android.gms.scheduler.ACTION_PROXY_SCHEDULE" />
+                <action android:name="${basePackageName}.android.gms.setup.auth.SecondDeviceAuth.START" />
+                <action android:name="${basePackageName}.android.gms.smartdevice.d2d.SourceDeviceService.START" />
+                <action android:name="${basePackageName}.android.gms.smartdevice.d2d.TargetDeviceService.START" />
+                <action android:name="${basePackageName}.android.gms.smartdevice.directtransfer.SourceDirectTransferService.START" />
+                <action android:name="${basePackageName}.android.gms.smartdevice.directtransfer.TargetDirectTransferService.START" />
+                <action android:name="${basePackageName}.android.gms.smartdevice.postsetup.PostSetupService.START" />
+                <action android:name="${basePackageName}.android.gms.smartdevice.setup.accounts.AccountsService.START" />
+                <action android:name="${basePackageName}.android.gms.smartdevice.wifi.START_WIFI_HELPER_SERVICE" />
+                <action android:name="${basePackageName}.android.gms.social.location.activity.service.START" />
+                <action android:name="${basePackageName}.android.gms.statementservice.EXECUTE" />
+                <action android:name="${basePackageName}.android.gms.stats.ACTION_UPLOAD_DROPBOX_ENTRIES" />
+                <action android:name="${basePackageName}.android.gms.speech.service.START" />
+                <action android:name="${basePackageName}.android.gms.thunderbird.service.START" />
+                <action android:name="${basePackageName}.android.gms.trustagent.BridgeApi.START" />
+                <action android:name="${basePackageName}.android.gms.trustagent.StateApi.START" />
+                <action android:name="${basePackageName}.android.gms.trustagent.trustlet.trustletmanagerservice.BIND" />
+                <action android:name="${basePackageName}.android.gms.trustlet.bluetooth.service.BIND" />
+                <action android:name="${basePackageName}.android.gms.trustlet.connectionlessble.service.BIND" />
+                <action android:name="${basePackageName}.android.gms.trustlet.face.service.BIND" />
+                <action android:name="${basePackageName}.android.gms.trustlet.nfc.service.BIND" />
+                <action android:name="${basePackageName}.android.gms.trustlet.onbody.service.BIND" />
+                <action android:name="${basePackageName}.android.gms.trustlet.place.service.BIND" />
+                <action android:name="${basePackageName}.android.gms.trustlet.voiceunlock.service.BIND" />
+                <action android:name="${basePackageName}.android.gms.udc.service.START" />
+                <action android:name="${basePackageName}.android.gms.update.START_API_SERVICE" />
+                <action android:name="${basePackageName}.android.gms.update.START_SERVICE" />
+                <action android:name="${basePackageName}.android.gms.update.START_SINGLE_USER_API_SERVICE" />
+                <action android:name="${basePackageName}.android.gms.update.START_TV_API_SERVICE" />
+                <action android:name="${basePackageName}.android.gms.userlocation.service.START" />
+                <action android:name="${basePackageName}.android.gms.vehicle.cabin.service.START" />
+                <action android:name="${basePackageName}.android.gms.vehicle.climate.service.START" />
+                <action android:name="${basePackageName}.android.gms.vehicle.info.service.START" />
+                <action android:name="${basePackageName}.android.gms.walletp2p.service.firstparty.BIND" />
+                <action android:name="${basePackageName}.android.gms.walletp2p.service.zeroparty.BIND" />
+                <action android:name="${basePackageName}.android.gms.wearable.BIND" />
+                <action android:name="${basePackageName}.android.gms.wearable.DATA_CHANGED" />
+                <action android:name="${basePackageName}.android.gms.wearable.NODE_CHANGED" />
+                <action android:name="${basePackageName}.android.mdd.service.START" />
+                <action android:name="${basePackageName}.android.mdh.service.START" />
+                <action android:name="${basePackageName}.android.mdh.service.listener.START" />
+                <action android:name="${basePackageName}.android.mobstore.service.START" />
 
                 <action
-                    android:name="com.google.android.gms.wearable.BIND_LISTENER"
+                    android:name="${basePackageName}.android.gms.wearable.BIND_LISTENER"
                     tools:ignore="WearableBindListener" />
             </intent-filter>
         </service>
diff -Naur inputbak/play-services-core/src/main/java/org/microg/gms/auth/AuthManager.java input/play-services-core/src/main/java/org/microg/gms/auth/AuthManager.java
--- inputbak/play-services-core/src/main/java/org/microg/gms/auth/AuthManager.java	2025-04-12 11:01:48.279720918 +0300
+++ input/play-services-core/src/main/java/org/microg/gms/auth/AuthManager.java	2025-04-12 11:02:49.216393655 +0300
@@ -17,6 +17,8 @@
 import org.microg.gms.accountaction.ErrorResolverKt;
 import org.microg.gms.accountaction.Resolution;
 import org.microg.gms.common.NotOkayException;
+import com.google.android.gms.base.BuildConfig;
+import org.microg.gms.common.PackageSpoofUtils;
 import org.microg.gms.common.PackageUtils;
 import org.microg.gms.settings.SettingsContract;
 
@@ -32,7 +34,7 @@
 public class AuthManager {
 
     private static final String TAG = "GmsAuthManager";
-    public static final String PERMISSION_TREE_BASE = "com.google.android.googleapps.permission.GOOGLE_AUTH.";
+    public static final String PERMISSION_TREE_BASE = BuildConfig.BASE_PACKAGE_NAME + ".android.googleapps.permission.GOOGLE_AUTH.";
     public static final String PREF_AUTH_VISIBLE = SettingsContract.Auth.VISIBLE;
     public static final int ONE_HOUR_IN_SECONDS = 60 * 60;
     public Map<Object, Object> dynamicFields = new HashMap<>();
@@ -329,7 +331,10 @@
         }
         AuthRequest request = new AuthRequest().fromContext(context)
                 .source("android")
-                .app(packageName, getPackageSignature())
+                .app(
+                        PackageSpoofUtils.spoofPackageName(context.getPackageManager(), packageName),
+                        PackageSpoofUtils.spoofStringSignature(context.getPackageManager(), packageName, getPackageSignature())
+                )
                 .email(accountName)
                 .token(getAccountManager().getPassword(account))
                 .service(service)
diff -Naur inputbak/play-services-core/src/main/java/org/microg/gms/auth/login/LoginActivity.java input/play-services-core/src/main/java/org/microg/gms/auth/login/LoginActivity.java
--- inputbak/play-services-core/src/main/java/org/microg/gms/auth/login/LoginActivity.java	2025-04-12 11:01:48.279720918 +0300
+++ input/play-services-core/src/main/java/org/microg/gms/auth/login/LoginActivity.java	2025-04-12 11:02:49.219726989 +0300
@@ -76,8 +76,7 @@
 import static android.view.View.VISIBLE;
 import static android.view.inputmethod.InputMethodManager.SHOW_IMPLICIT;
 import static org.microg.gms.auth.AuthPrefs.isAuthVisible;
-import static org.microg.gms.common.Constants.GMS_PACKAGE_NAME;
-import static org.microg.gms.common.Constants.GMS_VERSION_CODE;
+import static org.microg.gms.common.Constants.*;
 import static org.microg.gms.common.Constants.VENDING_PACKAGE_NAME;
 
 public class LoginActivity extends AssistantActivity {
@@ -368,7 +367,7 @@
         sendBroadcast(intent, PERMISSION_UPDATE_ACCOUNT);
     }
     private void retrieveGmsToken(final Account account) {
-        final AuthManager authManager = new AuthManager(this, account.name, GMS_PACKAGE_NAME, "ac2dm");
+        final AuthManager authManager = new AuthManager(this, account.name, GOOGLE_SERVICES_PACKAGE_NAME, "ac2dm");
         authManager.setPermitted(true);
         new AuthRequest().fromContext(this)
                 .appIsGms()
diff -Naur inputbak/play-services-core/src/main/java/org/microg/gms/auth/loginservice/AccountAuthenticator.java input/play-services-core/src/main/java/org/microg/gms/auth/loginservice/AccountAuthenticator.java
--- inputbak/play-services-core/src/main/java/org/microg/gms/auth/loginservice/AccountAuthenticator.java	2025-04-12 11:01:48.279720918 +0300
+++ input/play-services-core/src/main/java/org/microg/gms/auth/loginservice/AccountAuthenticator.java	2025-04-12 11:02:49.223060323 +0300
@@ -30,6 +30,7 @@
 import com.google.android.gms.common.internal.CertData;
 import org.microg.gms.auth.*;
 import org.microg.gms.auth.login.LoginActivity;
+import org.microg.gms.common.PackageSpoofUtils;
 import org.microg.gms.common.PackageUtils;
 import org.microg.gms.auth.AuthResponse;
 import org.microg.gms.utils.PackageManagerUtilsKt;
@@ -142,7 +143,7 @@
                 Intent i = new Intent(context, AskPermissionActivity.class);
                 i.putExtras(options);
                 i.putExtra(KEY_ACCOUNT_AUTHENTICATOR_RESPONSE, response);
-                i.putExtra(KEY_ANDROID_PACKAGE_NAME, app);
+                i.putExtra(KEY_ANDROID_PACKAGE_NAME, PackageSpoofUtils.spoofPackageName(context.getPackageManager(), app));
                 i.putExtra(KEY_ACCOUNT_TYPE, account.type);
                 i.putExtra(KEY_ACCOUNT_NAME, account.name);
                 i.putExtra(KEY_AUTHTOKEN, authTokenType);
diff -Naur inputbak/play-services-core/src/main/java/org/microg/gms/gservices/GServices.java input/play-services-core/src/main/java/org/microg/gms/gservices/GServices.java
--- inputbak/play-services-core/src/main/java/org/microg/gms/gservices/GServices.java	2025-04-12 11:01:48.283054252 +0300
+++ input/play-services-core/src/main/java/org/microg/gms/gservices/GServices.java	2025-04-12 11:02:49.223060323 +0300
@@ -20,11 +20,12 @@
 import android.content.ContentValues;
 import android.database.Cursor;
 import android.net.Uri;
+import com.google.android.gms.base.BuildConfig;
 
 public class GServices {
-    public static final Uri CONTENT_URI = Uri.parse("content://com.google.android.gsf.gservices");
-    public static final Uri MAIN_URI = Uri.parse("content://com.google.android.gsf.gservices/main");
-    public static final Uri OVERRIDE_URI = Uri.parse("content://com.google.android.gsf.gservices/override");
+    public static final Uri CONTENT_URI = Uri.parse("content://" + BuildConfig.BASE_PACKAGE_NAME + ".android.gsf.gservices");
+    public static final Uri MAIN_URI = Uri.parse("content://" + BuildConfig.BASE_PACKAGE_NAME + ".android.gsf.gservices/main");
+    public static final Uri OVERRIDE_URI = Uri.parse("content://" + BuildConfig.BASE_PACKAGE_NAME + ".android.gsf.gservices/override");
 
     public static int setString(ContentResolver resolver, String key, String value) {
         ContentValues values = new ContentValues();
diff -Naur inputbak/play-services-core/src/main/java/org/microg/gms/gservices/GServicesProvider.java input/play-services-core/src/main/java/org/microg/gms/gservices/GServicesProvider.java
--- inputbak/play-services-core/src/main/java/org/microg/gms/gservices/GServicesProvider.java	2025-04-12 11:01:48.283054252 +0300
+++ input/play-services-core/src/main/java/org/microg/gms/gservices/GServicesProvider.java	2025-04-12 11:02:49.223060323 +0300
@@ -22,6 +22,7 @@
 import android.database.MatrixCursor;
 import android.net.Uri;
 import android.util.Log;
+import com.google.android.gms.base.BuildConfig;
 
 import java.util.HashMap;
 import java.util.HashSet;
@@ -39,7 +40,7 @@
  * if certain "experiments" are enabled on the device.
  */
 public class GServicesProvider extends ContentProvider {
-    public static final Uri CONTENT_URI = Uri.parse("content://com.google.android.gsf.gservices/");
+    public static final Uri CONTENT_URI = Uri.parse("content://" + BuildConfig.BASE_PACKAGE_NAME + ".android.gsf.gservices/");
     public static final Uri MAIN_URI = Uri.withAppendedPath(CONTENT_URI, "main");
     public static final Uri OVERRIDE_URI = Uri.withAppendedPath(CONTENT_URI, "override");
     public static final Uri PREFIX_URI = Uri.withAppendedPath(CONTENT_URI, "prefix");
diff -Naur inputbak/play-services-core/src/main/java/org/microg/gms/people/PeopleManager.java input/play-services-core/src/main/java/org/microg/gms/people/PeopleManager.java
--- inputbak/play-services-core/src/main/java/org/microg/gms/people/PeopleManager.java	2025-04-12 11:01:48.283054252 +0300
+++ input/play-services-core/src/main/java/org/microg/gms/people/PeopleManager.java	2025-04-12 11:02:49.223060323 +0300
@@ -155,7 +155,7 @@
     }
 
     public static String getUserInfoAuthKey(Context context, Account account) {
-        AuthManager authManager = new AuthManager(context, account.name, Constants.GMS_PACKAGE_NAME, USERINFO_SCOPE);
+        AuthManager authManager = new AuthManager(context, account.name, Constants.GOOGLE_SERVICES_PACKAGE_NAME, USERINFO_SCOPE);
         authManager.setPermitted(true);
         String result = authManager.getAuthToken();
         if (result == null) {
diff -Naur inputbak/play-services-core/src/main/kotlin/org/microg/gms/accountsettings/ui/WebViewHelper.kt input/play-services-core/src/main/kotlin/org/microg/gms/accountsettings/ui/WebViewHelper.kt
--- inputbak/play-services-core/src/main/kotlin/org/microg/gms/accountsettings/ui/WebViewHelper.kt	2025-04-12 11:01:48.283054252 +0300
+++ input/play-services-core/src/main/kotlin/org/microg/gms/accountsettings/ui/WebViewHelper.kt	2025-04-12 11:02:49.226393656 +0300
@@ -25,6 +25,7 @@
 import org.json.JSONObject
 import org.microg.gms.auth.AuthManager
 import org.microg.gms.common.Constants.GMS_PACKAGE_NAME
+import org.microg.gms.common.Constants.GOOGLE_SERVICES_PACKAGE_NAME
 import org.microg.gms.common.PackageUtils
 import java.net.URLEncoder
 import java.util.*
@@ -105,7 +106,7 @@
     private fun openWebWithAccount(accountName: String, url: String?) {
         try {
             val service = "weblogin:continue=" + URLEncoder.encode(url, "utf-8")
-            val authManager = AuthManager(activity, accountName, GMS_PACKAGE_NAME, service)
+            val authManager = AuthManager(activity, accountName, GOOGLE_SERVICES_PACKAGE_NAME, service)
             val authUrl = authManager.requestAuthWithForegroundResolution(false)?.auth
             if (authUrl?.contains("WILL_NOT_SIGN_IN") == true) {
                 throw RuntimeException("Would not sign in")
@@ -142,4 +143,4 @@
             }.toString())
         }"
     }
-}
\ No newline at end of file
+}
diff -Naur inputbak/play-services-core/src/main/kotlin/org/microg/gms/accountsettings/ui/extensions.kt input/play-services-core/src/main/kotlin/org/microg/gms/accountsettings/ui/extensions.kt
--- inputbak/play-services-core/src/main/kotlin/org/microg/gms/accountsettings/ui/extensions.kt	2025-04-12 11:01:48.283054252 +0300
+++ input/play-services-core/src/main/kotlin/org/microg/gms/accountsettings/ui/extensions.kt	2025-04-12 11:02:49.226393656 +0300
@@ -5,12 +5,14 @@
 
 package org.microg.gms.accountsettings.ui
 
-const val ACTION_BROWSE_SETTINGS = "com.google.android.gms.accountsettings.action.BROWSE_SETTINGS"
-const val ACTION_MY_ACCOUNT = "com.google.android.gms.accountsettings.MY_ACCOUNT"
-const val ACTION_ACCOUNT_PREFERENCES_SETTINGS = "com.google.android.gms.accountsettings.ACCOUNT_PREFERENCES_SETTINGS"
-const val ACTION_PRIVACY_SETTINGS = "com.google.android.gms.accountsettings.PRIVACY_SETTINGS"
-const val ACTION_SECURITY_SETTINGS = "com.google.android.gms.accountsettings.SECURITY_SETTINGS"
-const val ACTION_LOCATION_SHARING = "com.google.android.gms.location.settings.LOCATION_SHARING"
+import com.google.android.gms.base.BuildConfig
+
+const val ACTION_BROWSE_SETTINGS = BuildConfig.BASE_PACKAGE_NAME + ".android.gms.accountsettings.action.BROWSE_SETTINGS"
+const val ACTION_MY_ACCOUNT = BuildConfig.BASE_PACKAGE_NAME + ".android.gms.accountsettings.MY_ACCOUNT"
+const val ACTION_ACCOUNT_PREFERENCES_SETTINGS = BuildConfig.BASE_PACKAGE_NAME + ".android.gms.accountsettings.ACCOUNT_PREFERENCES_SETTINGS"
+const val ACTION_PRIVACY_SETTINGS = BuildConfig.BASE_PACKAGE_NAME + ".android.gms.accountsettings.PRIVACY_SETTINGS"
+const val ACTION_SECURITY_SETTINGS = BuildConfig.BASE_PACKAGE_NAME + ".android.gms.accountsettings.SECURITY_SETTINGS"
+const val ACTION_LOCATION_SHARING = BuildConfig.BASE_PACKAGE_NAME + ".android.gms.location.settings.LOCATION_SHARING"
 
 const val EXTRA_CALLING_PACKAGE_NAME = "extra.callingPackageName"
 const val EXTRA_IGNORE_ACCOUNT = "extra.ignoreAccount"
@@ -25,4 +27,4 @@
 
 const val KEY_UPDATED_PHOTO_URL = "updatedPhotoUrl"
 
-const val OPTION_SCREEN_FLAVOR = "screenFlavor"
\ No newline at end of file
+const val OPTION_SCREEN_FLAVOR = "screenFlavor"
diff -Naur inputbak/play-services-core/src/main/kotlin/org/microg/gms/chimera/ServiceProvider.kt input/play-services-core/src/main/kotlin/org/microg/gms/chimera/ServiceProvider.kt
--- inputbak/play-services-core/src/main/kotlin/org/microg/gms/chimera/ServiceProvider.kt	2025-04-12 11:01:48.286387585 +0300
+++ input/play-services-core/src/main/kotlin/org/microg/gms/chimera/ServiceProvider.kt	2025-04-12 11:02:49.226393656 +0300
@@ -15,6 +15,7 @@
 import android.os.Bundle
 import android.util.Log
 import androidx.core.os.bundleOf
+import com.google.android.gms.base.BuildConfig
 import org.microg.gms.DummyService
 import org.microg.gms.common.GmsService
 import org.microg.gms.common.RemoteListenerProxy
@@ -79,7 +80,7 @@
 
     override fun getType(uri: Uri): String {
         Log.d(TAG, "getType: $uri")
-        return "vnd.android.cursor.item/com.google.android.gms.chimera"
+        return "vnd.android.cursor.item/" + BuildConfig.BASE_PACKAGE_NAME + ".android.gms.chimera"
     }
 
     companion object {
diff -Naur inputbak/play-services-core/src/main/kotlin/org/microg/gms/games/extensions.kt input/play-services-core/src/main/kotlin/org/microg/gms/games/extensions.kt
--- inputbak/play-services-core/src/main/kotlin/org/microg/gms/games/extensions.kt	2025-04-12 11:01:48.286387585 +0300
+++ input/play-services-core/src/main/kotlin/org/microg/gms/games/extensions.kt	2025-04-12 11:02:49.229726990 +0300
@@ -207,7 +207,7 @@
 }
 
 suspend fun registerForGames(context: Context, account: Account, queue: RequestQueue = singleInstanceOf { Volley.newRequestQueue(context.applicationContext) }) {
-    val authManager = AuthManager(context, account.name, Constants.GMS_PACKAGE_NAME, "oauth2:${Scopes.GAMES_FIRSTPARTY}")
+    val authManager = AuthManager(context, account.name, Constants.GOOGLE_SERVICES_PACKAGE_NAME, "oauth2:${Scopes.GAMES_FIRSTPARTY}")
     authManager.setOauth2Foreground("1")
     val authToken = withContext(Dispatchers.IO) { authManager.requestAuthWithBackgroundResolution(false).auth }
     val androidId = getSettings(context, CheckIn.getContentUri(context), arrayOf(CheckIn.ANDROID_ID)) { cursor: Cursor -> cursor.getLong(0) }
diff -Naur inputbak/play-services-core/src/main/kotlin/org/microg/gms/potokens/PoTokensService.kt input/play-services-core/src/main/kotlin/org/microg/gms/potokens/PoTokensService.kt
--- inputbak/play-services-core/src/main/kotlin/org/microg/gms/potokens/PoTokensService.kt	2025-04-12 11:01:48.286387585 +0300
+++ input/play-services-core/src/main/kotlin/org/microg/gms/potokens/PoTokensService.kt	2025-04-12 11:02:49.229726990 +0300
@@ -32,7 +32,7 @@
         callback.onPostInitCompleteWithConnectionInfo(
             CommonStatusCodes.SUCCESS,
             PoTokensServiceImpl(
-                applicationContext, request.packageName, lifecycleScope
+                applicationContext, "com.google.android.apps.youtube", lifecycleScope
             ),
             ConnectionInfo().apply { features = FEATURES }
         )
diff -Naur inputbak/play-services-core/src/main/res/xml/authenticator.xml input/play-services-core/src/main/res/xml/authenticator.xml
--- inputbak/play-services-core/src/main/res/xml/authenticator.xml	2025-04-12 11:01:48.299720920 +0300
+++ input/play-services-core/src/main/res/xml/authenticator.xml	2025-04-12 11:02:49.229726990 +0300
@@ -16,7 +16,7 @@
 
 <account-authenticator xmlns:android="http://schemas.android.com/apk/res/android"
     android:accountPreferences="@xml/preferences_auth"
-    android:accountType="com.google"
+    android:accountType="@string/base_package_name"
     android:customTokens="true"
     android:icon="@drawable/proprietary_auth_gls_ic_google_selected"
     android:smallIcon="@drawable/proprietary_auth_gls_ic_google_minitab_selected"
diff -Naur inputbak/play-services-core/src/main/res/xml/contact_syncadapter.xml input/play-services-core/src/main/res/xml/contact_syncadapter.xml
--- inputbak/play-services-core/src/main/res/xml/contact_syncadapter.xml	2025-04-12 11:01:48.299720920 +0300
+++ input/play-services-core/src/main/res/xml/contact_syncadapter.xml	2025-04-12 11:02:49.229726990 +0300
@@ -16,6 +16,6 @@
   -->
 
 <sync-adapter xmlns:android="http://schemas.android.com/apk/res/android"
-              android:accountType="com.google"
+              android:accountType="@string/base_package_name"
               android:contentAuthority="com.android.contacts"
               android:userVisible="false"/>
\ No newline at end of file
diff -Naur inputbak/play-services-core/src/main/res/xml/preferences_accounts.xml input/play-services-core/src/main/res/xml/preferences_accounts.xml
--- inputbak/play-services-core/src/main/res/xml/preferences_accounts.xml	2025-04-12 11:01:48.299720920 +0300
+++ input/play-services-core/src/main/res/xml/preferences_accounts.xml	2025-04-12 11:02:49.233060323 +0300
@@ -17,7 +17,7 @@
             android:title="@string/pref_add_account_summary">
             <intent
                 android:targetClass="org.microg.gms.auth.login.LoginActivity"
-                android:targetPackage="com.google.android.gms" />
+                android:targetPackage="@string/var_pref_start_gms_package" />
         </Preference>
     </PreferenceCategory>
     <PreferenceCategory
diff -Naur inputbak/play-services-core/src/main/res/xml/preferences_auth.xml input/play-services-core/src/main/res/xml/preferences_auth.xml
--- inputbak/play-services-core/src/main/res/xml/preferences_auth.xml	2025-04-12 11:01:48.299720920 +0300
+++ input/play-services-core/src/main/res/xml/preferences_auth.xml	2025-04-12 11:02:49.233060323 +0300
@@ -19,21 +19,21 @@
         android:key="k2"
         android:title="@string/prefs_account_security">
         <intent
-            android:action="com.google.android.gms.accountsettings.SECURITY_SETTINGS"
-            android:targetPackage="@string/package_id" />
+            android:action="@string/var_pref_auth_action_security_settings"
+            android:targetPackage="@string/var_pref_start_gms_package" />
     </PreferenceScreen>
     <PreferenceScreen
         android:key="k3"
         android:title="@string/prefs_account_privacy">
         <intent
-            android:action="com.google.android.gms.accountsettings.PRIVACY_SETTINGS"
-            android:targetPackage="@string/package_id" />
+            android:action="@string/var_pref_auth_action_privacy_settings"
+            android:targetPackage="@string/var_pref_start_gms_package" />
     </PreferenceScreen>
     <PreferenceScreen
         android:key="k4"
         android:title="@string/prefs_account">
         <intent
-            android:action="com.google.android.gms.accountsettings.ACCOUNT_PREFERENCES_SETTINGS"
-            android:targetPackage="@string/package_id" />
+            android:action="@string/var_pref_auth_action_preferences_settings"
+            android:targetPackage="@string/var_pref_start_gms_package" />
     </PreferenceScreen>
 </PreferenceScreen>
diff -Naur inputbak/play-services-core/src/main/res/xml/preferences_start.xml input/play-services-core/src/main/res/xml/preferences_start.xml
--- inputbak/play-services-core/src/main/res/xml/preferences_start.xml	2025-04-12 11:01:48.299720920 +0300
+++ input/play-services-core/src/main/res/xml/preferences_start.xml	2025-04-12 11:02:49.233060323 +0300
@@ -23,7 +23,7 @@
             android:title="@string/self_check_title">
             <intent
                 android:targetClass="org.microg.gms.ui.SelfCheckFragment$AsActivity"
-                android:targetPackage="@string/package_id" />
+                android:targetPackage="@string/var_pref_start_gms_package" />
         </Preference>
     </PreferenceCategory>
     <PreferenceCategory android:title="@string/prefcat_google_services" android:key="prefcat_google_services">
@@ -59,7 +59,7 @@
             app:isPreferenceVisible="false">
             <intent
                 android:targetClass="org.microg.gms.ui.GoogleMoreFragment$AsActivity"
-                android:targetPackage="@string/package_id" />
+                android:targetPackage="@string/var_pref_start_gms_package" />
         </Preference>
     </PreferenceCategory>
     <PreferenceCategory android:layout="@layout/preference_category_no_label" android:key="prefcat_other_services">
diff -Naur inputbak/play-services-droidguard/build.gradle input/play-services-droidguard/build.gradle
--- inputbak/play-services-droidguard/build.gradle	2025-04-12 11:01:48.303054254 +0300
+++ input/play-services-droidguard/build.gradle	2025-04-12 11:02:49.236393657 +0300
@@ -22,6 +22,10 @@
         versionName version
         minSdkVersion androidMinSdk
         targetSdkVersion androidTargetSdk
+
+        manifestPlaceholders = [
+                basePackageName: "$basePackageName"
+        ]
     }
 
     sourceSets {
diff -Naur inputbak/play-services-droidguard/core/src/main/AndroidManifest.xml input/play-services-droidguard/core/src/main/AndroidManifest.xml
--- inputbak/play-services-droidguard/core/src/main/AndroidManifest.xml	2025-04-12 11:01:48.303054254 +0300
+++ input/play-services-droidguard/core/src/main/AndroidManifest.xml	2025-04-12 11:02:49.239726991 +0300
@@ -15,9 +15,9 @@
             android:exported="true"
             android:process="com.google.android.gms.unstable">
             <intent-filter>
-                <action android:name="com.google.android.gms.droidguard.service.INIT" />
-                <action android:name="com.google.android.gms.droidguard.service.PING" />
-                <action android:name="com.google.android.gms.droidguard.service.START" />
+                <action android:name="${basePackageName}.android.gms.droidguard.service.INIT" />
+                <action android:name="${basePackageName}.android.gms.droidguard.service.PING" />
+                <action android:name="${basePackageName}.android.gms.droidguard.service.START" />
 
                 <category android:name="android.intent.category.DEFAULT" />
             </intent-filter>
diff -Naur inputbak/play-services-droidguard/core/src/main/java/com/google/android/gms/droidguard/DroidGuardChimeraService.java input/play-services-droidguard/core/src/main/java/com/google/android/gms/droidguard/DroidGuardChimeraService.java
--- inputbak/play-services-droidguard/core/src/main/java/com/google/android/gms/droidguard/DroidGuardChimeraService.java	2025-04-12 11:01:48.306387587 +0300
+++ input/play-services-droidguard/core/src/main/java/com/google/android/gms/droidguard/DroidGuardChimeraService.java	2025-04-12 11:02:49.239726991 +0300
@@ -13,6 +13,7 @@
 
 import androidx.annotation.Nullable;
 
+import com.google.android.gms.common.BuildConfig;
 import com.google.android.gms.framework.tracing.wrapper.TracingIntentService;
 
 import org.microg.gms.droidguard.core.DroidGuardServiceBroker;
@@ -111,7 +112,7 @@
     @Nullable
     @Override
     public final IBinder onBind(Intent intent) {
-        if (intent != null && intent.getAction() != null && intent.getAction().equals("com.google.android.gms.droidguard.service.START")) {
+        if (intent != null && intent.getAction() != null && intent.getAction().equals(BuildConfig.BASE_PACKAGE_NAME + ".android.gms.droidguard.service.START")) {
             return new DroidGuardServiceBroker(this);
         }
         return null;
diff -Naur inputbak/play-services-fido/core/build.gradle input/play-services-fido/core/build.gradle
--- inputbak/play-services-fido/core/build.gradle	2025-04-12 11:01:48.313054255 +0300
+++ input/play-services-fido/core/build.gradle	2025-04-12 11:02:49.239726991 +0300
@@ -44,6 +44,10 @@
         versionName version
         minSdkVersion androidMinSdk
         targetSdkVersion androidTargetSdk
+
+        manifestPlaceholders = [
+                basePackageName: "$basePackageName"
+        ]
     }
 
     buildFeatures {
diff -Naur inputbak/play-services-fido/core/src/main/AndroidManifest.xml input/play-services-fido/core/src/main/AndroidManifest.xml
--- inputbak/play-services-fido/core/src/main/AndroidManifest.xml	2025-04-12 11:01:48.313054255 +0300
+++ input/play-services-fido/core/src/main/AndroidManifest.xml	2025-04-12 11:02:49.243060324 +0300
@@ -21,7 +21,7 @@
             android:name=".privileged.Fido2PrivilegedService"
             android:exported="true">
             <intent-filter>
-                <action android:name="com.google.android.gms.fido.fido2.privileged.START" />
+                <action android:name="${basePackageName}.android.gms.fido.fido2.privileged.START" />
                 <category android:name="android.intent.category.DEFAULT" />
             </intent-filter>
         </service>
diff -Naur inputbak/play-services-gcm/build.gradle input/play-services-gcm/build.gradle
--- inputbak/play-services-gcm/build.gradle	2025-04-12 11:01:48.326387589 +0300
+++ input/play-services-gcm/build.gradle	2025-04-12 11:02:49.243060324 +0300
@@ -15,6 +15,10 @@
         versionName version
         minSdkVersion androidMinSdk
         targetSdkVersion androidTargetSdk
+
+        manifestPlaceholders = [
+                basePackageName: "$basePackageName"
+        ]
     }
 
     compileOptions {
diff -Naur inputbak/play-services-gcm/src/main/AndroidManifest.xml input/play-services-gcm/src/main/AndroidManifest.xml
--- inputbak/play-services-gcm/src/main/AndroidManifest.xml	2025-04-12 11:01:48.326387589 +0300
+++ input/play-services-gcm/src/main/AndroidManifest.xml	2025-04-12 11:02:49.243060324 +0300
@@ -18,7 +18,7 @@
 <manifest xmlns:android="http://schemas.android.com/apk/res/android">
 
     <!-- Permissions required for GCM -->
-    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE"/>
+    <uses-permission android:name="${basePackageName}.android.c2dm.permission.RECEIVE"/>
     <uses-permission android:name="android.permission.INTERNET"/>
 
     <!-- Move to play-services-measurement -->
diff -Naur inputbak/play-services-gcm/src/main/java/com/google/android/gms/gcm/GcmListenerService.java input/play-services-gcm/src/main/java/com/google/android/gms/gcm/GcmListenerService.java
--- inputbak/play-services-gcm/src/main/java/com/google/android/gms/gcm/GcmListenerService.java	2025-04-12 11:01:48.326387589 +0300
+++ input/play-services-gcm/src/main/java/com/google/android/gms/gcm/GcmListenerService.java	2025-04-12 11:02:49.246393658 +0300
@@ -53,7 +53,7 @@
  *     android:name=".YourGcmListenerService"
  *     android:exported="false" >
  *     <intent-filter>
- *         <action android:name="com.google.android.c2dm.intent.RECEIVE" />
+ *         <action android:name="${basePackageName}.android.c2dm.intent.RECEIVE" />
  *     </intent-filter>
  * </service></pre>
  */
diff -Naur inputbak/play-services-gcm/src/main/java/com/google/android/gms/gcm/GcmNetworkManager.java input/play-services-gcm/src/main/java/com/google/android/gms/gcm/GcmNetworkManager.java
--- inputbak/play-services-gcm/src/main/java/com/google/android/gms/gcm/GcmNetworkManager.java	2025-04-12 11:01:48.326387589 +0300
+++ input/play-services-gcm/src/main/java/com/google/android/gms/gcm/GcmNetworkManager.java	2025-04-12 11:02:49.246393658 +0300
@@ -67,9 +67,9 @@
  * <pre>
  * <service android:name=".MyUploadService"
  *     android:exported="true"
- *     android:permission="com.google.android.gms.permission.BIND_NETWORK_TASK_SERVICE" >
+ *     android:permission="${basePackageName}.android.gms.permission.BIND_NETWORK_TASK_SERVICE" >
  *     <intent-filter>
- *        <action android:name="com.google.android.gms.gcm.ACTION_TASK_READY" />
+ *        <action android:name="${basePackageName}.android.gms.gcm.ACTION_TASK_READY" />
  *     </intent-filter>
  * </service>
  * </pre>
diff -Naur inputbak/play-services-gcm/src/main/java/com/google/android/gms/gcm/GcmReceiver.java input/play-services-gcm/src/main/java/com/google/android/gms/gcm/GcmReceiver.java
--- inputbak/play-services-gcm/src/main/java/com/google/android/gms/gcm/GcmReceiver.java	2025-04-12 11:01:48.326387589 +0300
+++ input/play-services-gcm/src/main/java/com/google/android/gms/gcm/GcmReceiver.java	2025-04-12 11:02:49.246393658 +0300
@@ -44,12 +44,12 @@
  * <p/>
  * <pre>
  * <receiver
- *     android:name="com.google.android.gms.gcm.GcmReceiver"
+ *     android:name="${basePackageName}.android.gms.gcm.GcmReceiver"
  *     android:exported="true"
- *     android:permission="com.google.android.c2dm.permission.SEND" >
+ *     android:permission="${basePackageName}.android.c2dm.permission.SEND" >
  *     <intent-filter>
- *         <action android:name="com.google.android.c2dm.intent.RECEIVE" />
- *         <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
+ *         <action android:name="${basePackageName}.android.c2dm.intent.RECEIVE" />
+ *         <action android:name="${basePackageName}.android.c2dm.intent.REGISTRATION" />
  *         <category android:name="YOUR_PACKAGE_NAME" />
  *     </intent-filter>
  * </receiver></pre>
diff -Naur inputbak/play-services-gcm/src/main/java/com/google/android/gms/gcm/GcmTaskService.java input/play-services-gcm/src/main/java/com/google/android/gms/gcm/GcmTaskService.java
--- inputbak/play-services-gcm/src/main/java/com/google/android/gms/gcm/GcmTaskService.java	2025-04-12 11:01:48.326387589 +0300
+++ input/play-services-gcm/src/main/java/com/google/android/gms/gcm/GcmTaskService.java	2025-04-12 11:02:49.246393658 +0300
@@ -38,10 +38,10 @@
  * {@link com.google.android.gms.gcm.GcmTaskService#SERVICE_ACTION_EXECUTE_TASK}. Here's an example:
  * <pre>
  *     <service android:name="MyTaskService"
- *              android:permission="com.google.android.gms.permission.BIND_NETWORK_TASK_SERVICE"
+ *              android:permission="${basePackageName}.android.gms.permission.BIND_NETWORK_TASK_SERVICE"
  *              android:exported="true">
  *              <intent-filter>
- *                  <action android:name="com.google.android.gms.gcm.ACTION_TASK_READY"/>
+ *                  <action android:name="${basePackageName}.android.gms.gcm.ACTION_TASK_READY"/>
  *              </intent-filter>
  *     </service>
  * </pre>
diff -Naur inputbak/play-services-gmscompliance/core/build.gradle input/play-services-gmscompliance/core/build.gradle
--- inputbak/play-services-gmscompliance/core/build.gradle	2025-04-12 11:01:48.326387589 +0300
+++ input/play-services-gmscompliance/core/build.gradle	2025-04-12 11:02:49.249726992 +0300
@@ -35,6 +35,10 @@
         versionName version
         minSdkVersion androidMinSdk
         targetSdkVersion androidTargetSdk
+
+        manifestPlaceholders = [
+                basePackageName: "$basePackageName"
+        ]
     }
 
     sourceSets {
diff -Naur inputbak/play-services-gmscompliance/core/src/main/AndroidManifest.xml input/play-services-gmscompliance/core/src/main/AndroidManifest.xml
--- inputbak/play-services-gmscompliance/core/src/main/AndroidManifest.xml	2025-04-12 11:01:48.326387589 +0300
+++ input/play-services-gmscompliance/core/src/main/AndroidManifest.xml	2025-04-12 11:02:49.249726992 +0300
@@ -9,7 +9,7 @@
     <application>
         <service android:name="org.microg.gms.gmscompliance.GmsDeviceComplianceService">
             <intent-filter>
-                <action android:name="com.google.android.gms.gmscompliance.service.START" />
+                <action android:name="${basePackageName}.android.gms.gmscompliance.service.START" />
             </intent-filter>
         </service>
     </application>
diff -Naur inputbak/play-services-iid/build.gradle input/play-services-iid/build.gradle
--- inputbak/play-services-iid/build.gradle	2025-04-12 11:01:48.329720923 +0300
+++ input/play-services-iid/build.gradle	2025-04-12 11:02:49.249726992 +0300
@@ -19,6 +19,10 @@
         versionName version
         minSdkVersion androidMinSdk
         targetSdkVersion androidTargetSdk
+
+        manifestPlaceholders = [
+                basePackageName: "$basePackageName"
+        ]
     }
 
     compileOptions {
diff -Naur inputbak/play-services-iid/src/main/AndroidManifest.xml input/play-services-iid/src/main/AndroidManifest.xml
--- inputbak/play-services-iid/src/main/AndroidManifest.xml	2025-04-12 11:01:48.329720923 +0300
+++ input/play-services-iid/src/main/AndroidManifest.xml	2025-04-12 11:02:49.249726992 +0300
@@ -7,6 +7,6 @@
 <manifest xmlns:android="http://schemas.android.com/apk/res/android">
 
     <!-- Permissions required for IID -->
-    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE"/>
+    <uses-permission android:name="${basePackageName}.android.c2dm.permission.RECEIVE"/>
     <uses-permission android:name="android.permission.INTERNET"/>
 </manifest>
diff -Naur inputbak/play-services-iid/src/main/java/com/google/android/gms/iid/InstanceIDListenerService.java input/play-services-iid/src/main/java/com/google/android/gms/iid/InstanceIDListenerService.java
--- inputbak/play-services-iid/src/main/java/com/google/android/gms/iid/InstanceIDListenerService.java	2025-04-12 11:01:48.329720923 +0300
+++ input/play-services-iid/src/main/java/com/google/android/gms/iid/InstanceIDListenerService.java	2025-04-12 11:02:49.253060325 +0300
@@ -43,7 +43,7 @@
  * <pre>
  * <service android:name=".YourInstanceIDListenerService" android:exported="false">
  *     <intent-filter>
- *         <action android:name="com.google.android.gms.iid.InstanceID"/>
+ *         <action android:name="${basePackageName}.android.gms.iid.InstanceID"/>
  *     </intent-filter>
  * </service></pre>
  * Do not export this service. Instead, keep it private to prevent other apps
diff -Naur inputbak/play-services-location/core/build.gradle input/play-services-location/core/build.gradle
--- inputbak/play-services-location/core/build.gradle	2025-04-12 11:01:48.329720923 +0300
+++ input/play-services-location/core/build.gradle	2025-04-12 11:02:49.253060325 +0300
@@ -43,6 +43,10 @@
         targetSdkVersion androidTargetSdk
         buildConfigField "String", "FORCE_SHOW_BACKGROUND_PERMISSION", "\"\""
         buildConfigField "boolean", "SHOW_NOTIFICATION_WHEN_NOT_PERMITTED", "false"
+
+        manifestPlaceholders = [
+                basePackageName: "$basePackageName"
+        ]
     }
 
     lintOptions {
diff -Naur inputbak/play-services-location/core/provider/build.gradle input/play-services-location/core/provider/build.gradle
--- inputbak/play-services-location/core/provider/build.gradle	2025-04-12 11:01:48.329720923 +0300
+++ input/play-services-location/core/provider/build.gradle	2025-04-12 11:02:49.253060325 +0300
@@ -41,6 +41,10 @@
         minSdkVersion androidMinSdk
         targetSdkVersion androidTargetSdk
         buildConfigField "String", "ICHNAEA_USER_AGENT", "\"microG/${version}\""
+
+        manifestPlaceholders = [
+                basePackageName: "$basePackageName"
+        ]
     }
 
     sourceSets {
diff -Naur inputbak/play-services-location/core/provider/src/main/AndroidManifest.xml input/play-services-location/core/provider/src/main/AndroidManifest.xml
--- inputbak/play-services-location/core/provider/src/main/AndroidManifest.xml	2025-04-12 11:01:48.329720923 +0300
+++ input/play-services-location/core/provider/src/main/AndroidManifest.xml	2025-04-12 11:02:49.253060325 +0300
@@ -78,7 +78,7 @@
             android:permission="android.permission.WRITE_SECURE_SETTINGS">
             <intent-filter>
                 <action android:name="com.android.location.service.GeocodeProvider" />
-                <action android:name="com.google.android.location.GeocodeProvider" />
+                <action android:name="${basePackageName}.android.location.GeocodeProvider" />
             </intent-filter>
             <meta-data
                 android:name="serviceVersion"
diff -Naur inputbak/play-services-location/core/src/huawei/AndroidManifest.xml input/play-services-location/core/src/huawei/AndroidManifest.xml
--- inputbak/play-services-location/core/src/huawei/AndroidManifest.xml	2025-04-12 11:01:48.333054257 +0300
+++ input/play-services-location/core/src/huawei/AndroidManifest.xml	2025-04-12 11:02:49.256393659 +0300
@@ -17,15 +17,15 @@
             android:name="org.microg.gms.location.manager.LocationManagerService"
             android:exported="true">
             <intent-filter>
-                <action android:name="com.google.android.location.internal.GoogleLocationManagerService.START" />
+                <action android:name="${basePackageName}.android.location.internal.GoogleLocationManagerService.START" />
             </intent-filter>
         </service>
         <service
             android:name="org.microg.gms.location.reporting.ReportingAndroidService"
             android:exported="true">
             <intent-filter>
-                <action android:name="com.google.android.location.reporting.service.START" />
-                <action android:name="com.google.android.gms.location.reporting.service.START" />
+                <action android:name="${basePackageName}.android.location.reporting.service.START" />
+                <action android:name="${basePackageName}.android.gms.location.reporting.service.START" />
 
                 <category android:name="android.intent.category.DEFAULT" />
             </intent-filter>
diff -Naur inputbak/play-services-location/core/src/main/AndroidManifest.xml input/play-services-location/core/src/main/AndroidManifest.xml
--- inputbak/play-services-location/core/src/main/AndroidManifest.xml	2025-04-12 11:01:48.333054257 +0300
+++ input/play-services-location/core/src/main/AndroidManifest.xml	2025-04-12 11:02:49.256393659 +0300
@@ -31,7 +31,7 @@
             android:launchMode="singleTask"
             android:theme="@style/Theme.App.Translucent">
             <intent-filter android:priority="-1">
-                <action android:name="com.google.android.gms.location.settings.CHECK_SETTINGS" />
+                <action android:name="${basePackageName}.android.gms.location.settings.CHECK_SETTINGS" />
                 <category android:name="android.intent.category.DEFAULT" />
             </intent-filter>
         </activity>
@@ -62,7 +62,7 @@
             android:name="org.microg.gms.location.manager.LocationManagerService"
             android:exported="true">
             <intent-filter>
-                <action android:name="com.google.android.location.internal.GoogleLocationManagerService.START" />
+                 <action android:name="${basePackageName}.android.location.internal.GoogleLocationManagerService.START" />
             </intent-filter>
         </service>
 
@@ -70,8 +70,8 @@
             android:name="org.microg.gms.location.reporting.ReportingAndroidService"
             android:exported="true">
             <intent-filter>
-                <action android:name="com.google.android.location.reporting.service.START" />
-                <action android:name="com.google.android.gms.location.reporting.service.START" />
+                <action android:name="${basePackageName}.android.location.reporting.service.START" />
+                <action android:name="${basePackageName}.android.gms.location.reporting.service.START" />
 
                 <category android:name="android.intent.category.DEFAULT" />
             </intent-filter>
diff -Naur inputbak/play-services-maps/build.gradle input/play-services-maps/build.gradle
--- inputbak/play-services-maps/build.gradle	2025-04-12 11:01:48.343054258 +0300
+++ input/play-services-maps/build.gradle	2025-04-12 11:02:49.256393659 +0300
@@ -21,6 +21,10 @@
         versionName version
         minSdkVersion androidMinSdk
         targetSdkVersion androidTargetSdk
+
+        manifestPlaceholders = [
+                basePackageName: "$basePackageName"
+        ]
     }
 
     compileOptions {
diff -Naur inputbak/play-services-maps/src/main/AndroidManifest.xml input/play-services-maps/src/main/AndroidManifest.xml
--- inputbak/play-services-maps/src/main/AndroidManifest.xml	2025-04-12 11:01:48.376387594 +0300
+++ input/play-services-maps/src/main/AndroidManifest.xml	2025-04-12 11:02:49.259726993 +0300
@@ -12,7 +12,7 @@
     <uses-feature android:glEsVersion="0x00020000" android:required="true"/>
 
     <queries>
-        <package android:name="com.google.android.apps.maps"/>
+        <package android:name="${basePackageName}.android.apps.maps"/>
     </queries>
 
     <application>
diff -Naur inputbak/play-services-nearby/build.gradle input/play-services-nearby/build.gradle
--- inputbak/play-services-nearby/build.gradle	2025-04-12 11:01:48.389720929 +0300
+++ input/play-services-nearby/build.gradle	2025-04-12 11:02:49.259726993 +0300
@@ -21,6 +21,10 @@
         versionName version
         minSdkVersion androidMinSdk
         targetSdkVersion androidTargetSdk
+
+        manifestPlaceholders = [
+                basePackageName: "$basePackageName"
+        ]
     }
 
     compileOptions {
diff -Naur inputbak/play-services-nearby/core/build.gradle input/play-services-nearby/core/build.gradle
--- inputbak/play-services-nearby/core/build.gradle	2025-04-12 11:01:48.389720929 +0300
+++ input/play-services-nearby/core/build.gradle	2025-04-12 11:02:49.259726993 +0300
@@ -40,6 +40,10 @@
         versionName version
         minSdkVersion androidMinSdk
         targetSdkVersion androidTargetSdk
+
+        manifestPlaceholders = [
+                basePackageName: "$basePackageName"
+        ]
     }
 
     buildFeatures {
diff -Naur inputbak/play-services-nearby/core/package/build.gradle input/play-services-nearby/core/package/build.gradle
--- inputbak/play-services-nearby/core/package/build.gradle	2025-04-12 11:01:48.389720929 +0300
+++ input/play-services-nearby/core/package/build.gradle	2025-04-12 11:02:49.259726993 +0300
@@ -24,6 +24,10 @@
         versionName version
         minSdkVersion androidMinSdk
         targetSdkVersion androidTargetSdk
+
+        manifestPlaceholders = [
+                basePackageName: "$basePackageName"
+        ]
     }
 
     sourceSets {
diff -Naur inputbak/play-services-nearby/core/package/src/main/AndroidManifest.xml input/play-services-nearby/core/package/src/main/AndroidManifest.xml
--- inputbak/play-services-nearby/core/package/src/main/AndroidManifest.xml	2025-04-12 11:01:48.389720929 +0300
+++ input/play-services-nearby/core/package/src/main/AndroidManifest.xml	2025-04-12 11:02:49.263060326 +0300
@@ -15,7 +15,7 @@
     <uses-permission android:name="android.permission.ACCESS_BACKGROUND_LOCATION" />
 
     <permission
-        android:name="com.google.android.gms.nearby.exposurenotification.EXPOSURE_CALLBACK"
+        android:name="${basePackageName}.android.gms.nearby.exposurenotification.EXPOSURE_CALLBACK"
         android:protectionLevel="normal" />
 
     <application>
diff -Naur inputbak/play-services-nearby/core/src/main/AndroidManifest.xml input/play-services-nearby/core/src/main/AndroidManifest.xml
--- inputbak/play-services-nearby/core/src/main/AndroidManifest.xml	2025-04-12 11:01:48.389720929 +0300
+++ input/play-services-nearby/core/src/main/AndroidManifest.xml	2025-04-12 11:02:49.263060326 +0300
@@ -5,7 +5,7 @@
 <manifest xmlns:android="http://schemas.android.com/apk/res/android">
 
     <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
-    <uses-permission android:name="com.google.android.gms.nearby.exposurenotification.EXPOSURE_CALLBACK" />
+    <uses-permission android:name="${basePackageName}.android.gms.nearby.exposurenotification.EXPOSURE_CALLBACK" />
     <uses-permission android:name="android.permission.POST_NOTIFICATIONS" />
 
     <application>
@@ -30,7 +30,7 @@
             android:process=":persistent"
             android:exported="true">
             <intent-filter>
-                <action android:name="com.google.android.gms.nearby.exposurenotification.START" />
+                <action android:name="${basePackageName}.android.gms.nearby.exposurenotification.START" />
             </intent-filter>
         </service>
 
@@ -71,7 +71,7 @@
             android:process=":ui"
             android:theme="@style/Theme.AppCompat.DayNight">
             <intent-filter android:priority="-100">
-                <action android:name="com.google.android.gms.settings.EXPOSURE_NOTIFICATION_SETTINGS" />
+                <action android:name="${basePackageName}.android.gms.settings.EXPOSURE_NOTIFICATION_SETTINGS" />
                 <category android:name="android.intent.category.DEFAULT" />
             </intent-filter>
         </activity>
diff -Naur inputbak/play-services-nearby/src/main/AndroidManifest.xml input/play-services-nearby/src/main/AndroidManifest.xml
--- inputbak/play-services-nearby/src/main/AndroidManifest.xml	2025-04-12 11:01:48.396387596 +0300
+++ input/play-services-nearby/src/main/AndroidManifest.xml	2025-04-12 11:02:49.263060326 +0300
@@ -6,8 +6,8 @@
 <manifest xmlns:android="http://schemas.android.com/apk/res/android">
     <application>
         <service
-                android:name="com.google.android.gms.nearby.exposurenotification.WakeUpService"
+                android:name="${basePackageName}.android.gms.nearby.exposurenotification.WakeUpService"
                 android:exported="true"
-                android:permission="com.google.android.gms.nearby.exposurenotification.EXPOSURE_CALLBACK"/>
+                android:permission="${basePackageName}.android.gms.nearby.exposurenotification.EXPOSURE_CALLBACK"/>
     </application>
 </manifest>
diff -Naur inputbak/play-services-oss-licenses/build.gradle input/play-services-oss-licenses/build.gradle
--- inputbak/play-services-oss-licenses/build.gradle	2025-04-12 11:01:48.399720930 +0300
+++ input/play-services-oss-licenses/build.gradle	2025-04-12 11:02:49.266393660 +0300
@@ -21,6 +21,10 @@
         versionName version
         minSdkVersion androidMinSdk
         targetSdkVersion androidTargetSdk
+
+        manifestPlaceholders = [
+                basePackageName: "$basePackageName"
+        ]
     }
 
     lintOptions {
diff -Naur inputbak/play-services-oss-licenses/core/build.gradle input/play-services-oss-licenses/core/build.gradle
--- inputbak/play-services-oss-licenses/core/build.gradle	2025-04-12 11:01:48.399720930 +0300
+++ input/play-services-oss-licenses/core/build.gradle	2025-04-12 11:02:49.266393660 +0300
@@ -23,6 +23,10 @@
         versionName version
         minSdkVersion androidMinSdk
         targetSdkVersion androidTargetSdk
+
+        manifestPlaceholders = [
+                basePackageName: "$basePackageName"
+        ]
     }
 
     sourceSets {
diff -Naur inputbak/play-services-oss-licenses/core/src/main/AndroidManifest.xml input/play-services-oss-licenses/core/src/main/AndroidManifest.xml
--- inputbak/play-services-oss-licenses/core/src/main/AndroidManifest.xml	2025-04-12 11:01:48.399720930 +0300
+++ input/play-services-oss-licenses/core/src/main/AndroidManifest.xml	2025-04-12 11:02:49.266393660 +0300
@@ -10,7 +10,7 @@
             android:name=".OssLicensesService"
             android:exported="true">
             <intent-filter>
-                <action android:name="com.google.android.gms.oss.licenses.service.START" />
+                <action android:name="${basePackageName}.android.gms.oss.licenses.service.START" />
             </intent-filter>
         </service>
     </application>
diff -Naur inputbak/play-services-oss-licenses/src/main/AndroidManifest.xml input/play-services-oss-licenses/src/main/AndroidManifest.xml
--- inputbak/play-services-oss-licenses/src/main/AndroidManifest.xml	2025-04-12 11:01:48.399720930 +0300
+++ input/play-services-oss-licenses/src/main/AndroidManifest.xml	2025-04-12 11:02:49.266393660 +0300
@@ -7,8 +7,8 @@
 
     <application>
         <activity
-            android:name="com.google.android.gms.oss.licenses.OssLicensesMenuActivity"
+            android:name="${basePackageName}.android.gms.oss.licenses.OssLicensesMenuActivity"
             android:label="@string/oss_license_title" />
-        <activity android:name="com.google.android.gms.oss.licenses.OssLicensesActivity" />
+        <activity android:name="${basePackageName}.android.gms.oss.licenses.OssLicensesActivity" />
     </application>
 </manifest>
diff -Naur inputbak/play-services-panorama/core/build.gradle input/play-services-panorama/core/build.gradle
--- inputbak/play-services-panorama/core/build.gradle	2025-04-12 11:01:48.403054264 +0300
+++ input/play-services-panorama/core/build.gradle	2025-04-12 11:02:49.269726994 +0300
@@ -28,6 +28,10 @@
         versionName version
         minSdkVersion androidMinSdk
         targetSdkVersion androidTargetSdk
+
+        manifestPlaceholders = [
+                basePackageName: "$basePackageName"
+        ]
     }
 
     sourceSets {
diff -Naur inputbak/play-services-panorama/core/src/main/AndroidManifest.xml input/play-services-panorama/core/src/main/AndroidManifest.xml
--- inputbak/play-services-panorama/core/src/main/AndroidManifest.xml	2025-04-12 11:01:48.403054264 +0300
+++ input/play-services-panorama/core/src/main/AndroidManifest.xml	2025-04-12 11:02:49.269726994 +0300
@@ -8,7 +8,7 @@
     <application>
         <service android:name="org.microg.gms.panorama.PanoramaService">
             <intent-filter>
-                <action android:name="com.google.android.gms.panorama.service.START" />
+                <action android:name="${basePackageName}.android.gms.panorama.service.START" />
             </intent-filter>
         </service>
     </application>
diff -Naur inputbak/play-services-pay/core/build.gradle input/play-services-pay/core/build.gradle
--- inputbak/play-services-pay/core/build.gradle	2025-04-12 11:01:48.403054264 +0300
+++ input/play-services-pay/core/build.gradle	2025-04-12 11:02:49.269726994 +0300
@@ -28,6 +28,10 @@
         versionName version
         minSdkVersion androidMinSdk
         targetSdkVersion androidTargetSdk
+
+        manifestPlaceholders = [
+                basePackageName: "$basePackageName"
+        ]
     }
 
     sourceSets {
diff -Naur inputbak/play-services-pay/core/src/main/AndroidManifest.xml input/play-services-pay/core/src/main/AndroidManifest.xml
--- inputbak/play-services-pay/core/src/main/AndroidManifest.xml	2025-04-12 11:01:48.403054264 +0300
+++ input/play-services-pay/core/src/main/AndroidManifest.xml	2025-04-12 11:02:49.269726994 +0300
@@ -6,13 +6,13 @@
 
     <application>
         <activity-alias
-            android:name="com.google.android.gms.pay.main.PayActivity"
+            android:name="${basePackageName}.android.gms.pay.main.PayActivity"
             android:exported="true"
             android:process=":ui"
             android:targetActivity="org.microg.gms.pay.PayActivity">
             <intent-filter>
-                <action android:name="com.google.android.gms.pay.PAY" />
-                <action android:name="com.google.android.gms.pay.PAY_OPTIONAL" />
+                <action android:name="${basePackageName}.android.gms.pay.PAY"/>
+                <action android:name="${basePackageName}.android.gms.pay.PAY_OPTIONAL"/>
 
                 <category android:name="android.intent.category.DEFAULT" />
             </intent-filter>
@@ -24,7 +24,7 @@
 
         <service android:name="org.microg.gms.pay.PayService">
             <intent-filter>
-                <action android:name="com.google.android.gms.pay.service.BIND" />
+                <action android:name="${basePackageName}.android.gms.pay.service.BIND" />
             </intent-filter>
         </service>
         <service
diff -Naur inputbak/play-services-recaptcha/core/build.gradle input/play-services-recaptcha/core/build.gradle
--- inputbak/play-services-recaptcha/core/build.gradle	2025-04-12 11:01:48.406387597 +0300
+++ input/play-services-recaptcha/core/build.gradle	2025-04-12 11:02:49.273060327 +0300
@@ -42,6 +42,10 @@
         versionName version
         minSdkVersion androidMinSdk
         targetSdkVersion androidTargetSdk
+
+        manifestPlaceholders = [
+                basePackageName: "$basePackageName"
+        ]
     }
 
     sourceSets {
diff -Naur inputbak/play-services-recaptcha/core/src/main/AndroidManifest.xml input/play-services-recaptcha/core/src/main/AndroidManifest.xml
--- inputbak/play-services-recaptcha/core/src/main/AndroidManifest.xml	2025-04-12 11:01:48.406387597 +0300
+++ input/play-services-recaptcha/core/src/main/AndroidManifest.xml	2025-04-12 11:02:49.273060327 +0300
@@ -11,7 +11,7 @@
         <service android:name="org.microg.gms.recaptcha.RecaptchaService"
                  android:process=":ui">
             <intent-filter>
-                <action android:name="com.google.android.gms.recaptcha.service.START"/>
+                <action android:name="${basePackageName}.android.gms.recaptcha.service.START"/>
             </intent-filter>
         </service>
     </application>
diff -Naur inputbak/play-services-safetynet/core/build.gradle input/play-services-safetynet/core/build.gradle
--- inputbak/play-services-safetynet/core/build.gradle	2025-04-12 11:01:48.413054265 +0300
+++ input/play-services-safetynet/core/build.gradle	2025-04-12 11:02:49.273060327 +0300
@@ -46,6 +46,10 @@
         versionName version
         minSdkVersion androidMinSdk
         targetSdkVersion androidTargetSdk
+
+        manifestPlaceholders = [
+                basePackageName: "$basePackageName"
+        ]
     }
 
     sourceSets {
diff -Naur inputbak/play-services-safetynet/core/src/main/AndroidManifest.xml input/play-services-safetynet/core/src/main/AndroidManifest.xml
--- inputbak/play-services-safetynet/core/src/main/AndroidManifest.xml	2025-04-12 11:01:48.413054265 +0300
+++ input/play-services-safetynet/core/src/main/AndroidManifest.xml	2025-04-12 11:02:49.273060327 +0300
@@ -9,7 +9,7 @@
     <application>
         <service android:name="org.microg.gms.safetynet.SafetyNetClientService">
             <intent-filter>
-                <action android:name="com.google.android.gms.safetynet.service.START" />
+                <action android:name="${basePackageName}.android.gms.safetynet.service.START" />
             </intent-filter>
         </service>
         <activity
diff -Naur inputbak/play-services-tapandpay/core/build.gradle input/play-services-tapandpay/core/build.gradle
--- inputbak/play-services-tapandpay/core/build.gradle	2025-04-12 11:01:48.416387598 +0300
+++ input/play-services-tapandpay/core/build.gradle	2025-04-12 11:02:49.276393661 +0300
@@ -28,6 +28,10 @@
         versionName version
         minSdkVersion androidMinSdk
         targetSdkVersion androidTargetSdk
+
+        manifestPlaceholders = [
+                basePackageName: "$basePackageName"
+        ]
     }
 
     sourceSets {
diff -Naur inputbak/play-services-tapandpay/core/src/main/AndroidManifest.xml input/play-services-tapandpay/core/src/main/AndroidManifest.xml
--- inputbak/play-services-tapandpay/core/src/main/AndroidManifest.xml	2025-04-12 11:01:48.416387598 +0300
+++ input/play-services-tapandpay/core/src/main/AndroidManifest.xml	2025-04-12 11:02:49.276393661 +0300
@@ -9,7 +9,7 @@
         <service android:name="org.microg.gms.tapandpay.TapAndPayService"
                  android:exported="true">
             <intent-filter>
-                <action android:name="com.google.android.gms.tapandpay.service.BIND"/>
+                <action android:name="${basePackageName}.android.gms.tapandpay.service.BIND"/>
             </intent-filter>
         </service>
     </application>
diff -Naur inputbak/vending-app/build.gradle input/vending-app/build.gradle
--- inputbak/vending-app/build.gradle	2025-04-12 11:01:48.429720933 +0300
+++ input/vending-app/build.gradle	2025-04-12 11:02:49.276393661 +0300
@@ -17,7 +17,9 @@
         versionCode vendingAppVersionCode
         minSdkVersion androidMinSdk
         targetSdkVersion androidTargetSdk
-
+	manifestPlaceholders = [
+                basePackageName: "$basePackageName"
+        ]
         multiDexEnabled true
     }
 
diff -Naur inputbak/vending-app/src/main/AndroidManifest.xml input/vending-app/src/main/AndroidManifest.xml
--- inputbak/vending-app/src/main/AndroidManifest.xml	2025-04-12 11:01:48.429720933 +0300
+++ input/vending-app/src/main/AndroidManifest.xml	2025-04-12 11:02:49.279726995 +0300
@@ -17,7 +17,7 @@
         android:maxSdkVersion="22" />
     <uses-permission android:name="org.microg.gms.permission.READ_SETTINGS" />
     <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
-    <uses-permission android:name="com.google.android.gms.permission.READ_SETTINGS" />
+    <uses-permission android:name="${basePackageName}.android.gms.permission.READ_SETTINGS" />
     <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
     <uses-permission android:name="android.permission.REQUEST_INSTALL_PACKAGES"/>
     <uses-permission android:name="android.permission.QUERY_ALL_PACKAGES" />
@@ -70,11 +70,11 @@
 
         <meta-data
             android:name="org.microg.gms.settings:source-package"
-            android:value="com.google.android.gms" />
+            android:value="${basePackageName}.android.gms" />
 
         <meta-data
             android:name="org.microg.gms.profile:source-package"
-            android:value="com.google.android.gms" />
+            android:value="${basePackageName}.android.gms" />
 
         <activity
             android:name=".GrantFakeSignaturePermissionActivity"
@@ -94,7 +94,7 @@
             android:name="com.google.android.finsky.externalreferrer.GetInstallReferrerService"
             android:exported="true">
             <intent-filter>
-                <action android:name="com.google.android.finsky.BIND_GET_INSTALL_REFERRER_SERVICE" />
+                <action android:name="${basePackageName}.android.finsky.BIND_GET_INSTALL_REFERRER_SERVICE" />
             </intent-filter>
         </service>
 
diff -Naur inputbak/vending-app/src/main/java/org/microg/vending/billing/Constants.kt input/vending-app/src/main/java/org/microg/vending/billing/Constants.kt
--- inputbak/vending-app/src/main/java/org/microg/vending/billing/Constants.kt	2025-04-12 11:01:48.433054267 +0300
+++ input/vending-app/src/main/java/org/microg/vending/billing/Constants.kt	2025-04-12 11:02:49.279726995 +0300
@@ -5,6 +5,8 @@
 
 package org.microg.vending.billing
 
+import com.google.android.gms.common.BuildConfig
+
 const val TAG = "Billing"
 
 // TODO: What versions to use?
@@ -13,5 +15,5 @@
 const val VENDING_PACKAGE_NAME = "com.android.vending"
 // TODO: Replace key name
 const val KEY_IAP_SHEET_UI_PARAM = "key_iap_sheet_ui_param"
-const val DEFAULT_ACCOUNT_TYPE = "com.google"
+const val DEFAULT_ACCOUNT_TYPE = BuildConfig.BASE_PACKAGE_NAME
 const val ADD_PAYMENT_METHOD_URL = "https://play.google.com/store/paymentmethods"
\ No newline at end of file
